character_event = {
	id = 300001
	desc = "EVTDESC300001"
	hide_from = yes
	is_triggered_only = yes
	
	option = {
		name = "EVTOPTA300001"
		hidden_tooltip = {
			remove_trait = crusader
			remove_trait = mujahid
			remove_trait = hunter
			remove_trait = impaler
			remove_trait = poet
			remove_trait = mystic
			remove_trait = scholar
			remove_trait = celibate
			remove_trait = falconer
			remove_trait = hedonist
			remove_trait = gardener
			remove_trait = stressed
			remove_trait = depressed
			remove_trait = ill
			remove_trait = possessed
			remove_trait = lunatic
			remove_trait = pneumonic
			remove_trait = syphilitic
			remove_trait = leper
			remove_trait = wounded
			remove_trait = maimed
			remove_trait = infirm
			remove_trait = incapable
			remove_trait = drunkard
			remove_trait = dwarf
			remove_trait = hunchback
			remove_trait = harelip
			remove_trait = clubfooted
			remove_trait = lisp
			remove_trait = stutter
			remove_trait = ugly
			remove_trait = fair
			remove_trait = quick
			remove_trait = genius
			remove_trait = slow
			remove_trait = imbecile
			remove_trait = tall
			remove_trait = strong
			remove_trait = weak
			remove_trait = inbred
			#4% chance of a random genetic trait
			random_list = {
				960 = { }
				1 = { add_trait = dwarf }
				2 = { add_trait = hunchback }
				3 = { add_trait = harelip }
				3 = { add_trait = clubfooted }
				3 = { add_trait = lisp }
				3 = { add_trait = stutter }
				5 = { add_trait = ugly }
				5 = { add_trait = fair }
				2 = { add_trait = quick }
				1 = { add_trait = genius }
				2 = { add_trait = slow }
				1 = { add_trait = imbecile }
				3 = { add_trait = tall }
				3 = { add_trait = strong }
				3 = { add_trait = weak }		
			}			
		}
	}
}

character_event = {
	id = 300002
	desc = "EVTDESC300001"
	hide_from = yes

	trigger = {
		NOT = { age = 1 }
		NOT = { has_character_flag = genetics_check }
	}
	
	mean_time_to_happen = {
		days = 1
	}
	
	option = {
		name = "EVTOPTA300001"
		set_character_flag = genetics_check
		set_character_flag = family_relations_initialised
		
		hidden_tooltip = {	
			#check for stillbirth
			character_event = { id = 190000 }
		
			#clean up genetics traits
			remove_trait = crusader
			remove_trait = mujahid
			remove_trait = hunter
			remove_trait = impaler
			remove_trait = poet
			remove_trait = mystic
			remove_trait = scholar
			remove_trait = celibate
			remove_trait = falconer
			remove_trait = hedonist
			remove_trait = gardener
			remove_trait = stressed
			remove_trait = depressed
			remove_trait = ill
			remove_trait = possessed
			remove_trait = lunatic
			remove_trait = pneumonic
			remove_trait = syphilitic
			remove_trait = leper
			remove_trait = wounded
			remove_trait = maimed
			remove_trait = infirm
			remove_trait = incapable
			remove_trait = drunkard
			remove_trait = dwarf
			remove_trait = hunchback
			remove_trait = harelip
			remove_trait = clubfooted
			remove_trait = lisp
			remove_trait = stutter
			remove_trait = ugly
			remove_trait = fair
			remove_trait = quick
			remove_trait = genius
			remove_trait = slow
			remove_trait = imbecile
			remove_trait = tall
			remove_trait = strong
			remove_trait = weak
			remove_trait = inbred
			
			#4% chance of a random genetic trait
			random_list = {
				960 = { }
				1 = { add_trait = dwarf }
				2 = { add_trait = hunchback }
				3 = { add_trait = harelip }
				3 = { add_trait = clubfooted }
				3 = { add_trait = lisp }
				3 = { add_trait = stutter }
				5 = { add_trait = ugly }
				5 = { add_trait = fair }
				2 = { add_trait = quick }
				1 = { add_trait = genius }
				2 = { add_trait = slow }
				1 = { add_trait = imbecile }
				3 = { add_trait = tall }
				3 = { add_trait = strong }
				3 = { add_trait = weak }		
			}			
			
			#reduce stats
			change_martial = -3
			change_diplomacy = -3
			change_intrigue = -3
			change_stewardship = -3
			change_learning = -3
		
			#check for culture change
			if = {
				limit = {
					location = { 
						religion = ROOT
						NOT = { culture = ROOT }
						NOT = {
							AND = {
								culture = saxon
								ROOT = { 	
									OR = {
										culture = norman
										culture = frankish
										culture = occitan
									}
								}
							}
						}			
						NOT = {
							AND = {
								kingdom = {
									title = k_sicily
								}
								ROOT = {
									OR = {
										culture = greek
										culture = maghreb_arabic
										culture = norman
									}
								}
							}
						}
					}
				}
				random = {
					chance = 5
					location = {
						ROOT = {
							culture = PREV
						}
					}					
				}
			}
		
			#check for inherited traits
			if = {
				limit = {
					father_even_if_dead = { trait = clubfooted }
					NOT = { trait = clubfooted }
				}
				random = {
					chance = 25
					add_trait = clubfooted
				}					
			}
			if = {
				limit = {
					mother = { trait = clubfooted }
					NOT = { trait = clubfooted }
					
				}
				random = {
					chance = 25
					add_trait = clubfooted
				}					
			}
			if = {
				limit = {
					father_even_if_dead = { trait = harelip }
					NOT = { trait = harelip }					
				}
				random = {
					chance = 25
					add_trait = harelip
				}					
			}
			if = {
				limit = {
					mother = { trait = harelip }
					NOT = { trait = harelip }
				}
				random = {
					chance = 25
					add_trait = harelip
				}					
			}
			if = {
				limit = {
					father_even_if_dead = { trait = hunchback }
					NOT = { trait = hunchback }
				}
				random = {
					chance = 15
					add_trait = hunchback
				}					
			}
			if = {
				limit = {
					mother = { trait = hunchback }
					NOT = { trait = hunchback }
				}
				random = {
					chance = 15
					add_trait = hunchback
				}					
			}
			if = {
				limit = {
					father_even_if_dead = { trait = lisp }
					NOT = { trait = lisp }					
				}
				random = {
					chance = 25
					add_trait = lisp
				}					
			}
			if = {
				limit = {
					NOT = { trait = lisp }
					mother = { trait = lisp }
				}
				random = {
					chance = 25
					add_trait = lisp
				}					
			}
			if = {
				limit = {
					NOT = { trait = stutter }
					father_even_if_dead  = { trait = stutter }
				}
				random = {
					chance = 25
					add_trait = stutter
				}					
			}
			if = {
				limit = {
					NOT = { trait = stutter }
					mother = { trait = stutter }
				}
				random = {
					chance = 25
					add_trait = stutter
				}					
			}
			if = {
				limit = {
					NOT = { trait = ugly }
					NOT = { trait = fair }	
					father_even_if_dead  = { trait = fair }
				}
				random = {
					chance = 33
					add_trait = fair
				}					
			}
			if = {
				limit = {
					NOT = { trait = ugly }
					NOT = { trait = fair }	
					mother = { trait = fair }
				}
				random = {
					chance = 33
					add_trait = fair
				}					
			}
			if = {
				limit = {
					NOT = { trait = ugly }
					NOT = { trait = fair }	
					father_even_if_dead  = { trait = ugly }
				}
				random = {
					chance = 33
					add_trait = ugly
				}					
			}
			if = {
				limit = {
					NOT = { trait = ugly }
					NOT = { trait = fair }	
					mother = { trait = ugly }
				}
				random = {
					chance = 33
					add_trait = ugly
				}					
			}
			if = {
				limit = {
					NOT = { trait = dwarf }
					NOT = { trait = tall }	
					father_even_if_dead  = { trait = tall }
				}
				random = {
					chance = 33
					add_trait = tall
				}					
			}
			if = {
				limit = {
					NOT = { trait = dwarf }
					NOT = { trait = tall }	
					mother = { trait = tall }
				}
				random = {
					chance = 33
					add_trait = tall
				}					
			}			
			if = {
				limit = {
					NOT = { trait = dwarf }
					NOT = { trait = tall }	
					father_even_if_dead  = { trait = dwarf }
				}
				random = {
					chance = 33
					add_trait = dwarf
				}					
			}
			if = {
				limit = {
					NOT = { trait = dwarf }
					NOT = { trait = tall }	
					mother = { trait = dwarf }
				}
				random = {
					chance = 33
					add_trait = dwarf
				}					
			}
			if = {
				limit = {
					NOT = { trait = genius }
					NOT = { trait = quick }
					NOT = { trait = slow }
					NOT = { trait = imbecile }
					father_even_if_dead  = { OR = { trait = genius trait = quick } }
				}
				random = {
					chance = 5
					add_trait = genius
				}					
			}
			if = {
				limit = {
					NOT = { trait = genius }
					NOT = { trait = quick }
					NOT = { trait = slow }
					NOT = { trait = imbecile }
					mother = { OR = { trait = genius trait = quick } }
				}
				random = {
					chance = 5
					add_trait = genius
				}					
			}
			if = {
				limit = {
					NOT = { trait = genius }
					NOT = { trait = quick }
					NOT = { trait = slow }
					NOT = { trait = imbecile }
					father_even_if_dead  = { OR = { trait = genius trait = quick } }
				}
				random = {
					chance = 10
					add_trait = quick
				}					
			}
			if = {
				limit = {
					NOT = { trait = genius }
					NOT = { trait = quick }
					NOT = { trait = slow }
					NOT = { trait = imbecile }
					mother = { OR = { trait = genius trait = quick } }
				}
				random = {
					chance = 10
					add_trait = quick
				}					
			}
			if = {
				limit = {
					NOT = { trait = genius }
					NOT = { trait = quick }
					NOT = { trait = slow }
					NOT = { trait = imbecile }
					father_even_if_dead  = { OR = { trait = slow trait = imbecile } }
				}
				random = {
					chance = 5
					add_trait = imbecile
				}					
			}
			if = {
				limit = {
					NOT = { trait = genius }
					NOT = { trait = quick }
					NOT = { trait = slow }
					NOT = { trait = imbecile }
					mother = { OR = { trait = slow trait = imbecile } }
				}
				random = {
					chance = 5
					add_trait = imbecile
				}					
			}			
			if = {
				limit = {
					NOT = { trait = genius }
					NOT = { trait = quick }
					NOT = { trait = slow }
					NOT = { trait = imbecile }
					father_even_if_dead  = { OR = { trait = slow trait = imbecile } }
				}
				random = {
					chance = 10
					add_trait = slow
				}					
			}
			if = {
				limit = {
					NOT = { trait = genius }
					NOT = { trait = quick }
					NOT = { trait = slow }
					NOT = { trait = imbecile }
					mother = { OR = { trait = slow trait = imbecile } }
				}
				random = {
					chance = 10
					add_trait = slow
				}					
			}
			if = {
				limit = {
					NOT = { trait = inbred }
					father_even_if_dead = {
						ROOT = {
							mother = {
								is_close_relative = PREVPREV
							}
						}
					}			
				}
				random = {
					chance = 33
					add_trait = inbred
				}					
			}			
			if = {
				limit = {
					NOT = { trait = inbred }
					father_even_if_dead  = { trait = inbred }
				}
				random = {
					chance = 25
					add_trait = inbred
				}					
			}
			if = {
				limit = {
					NOT = { trait = inbred }
					mother = { trait = inbred }
				}
				random = {
					chance = 25
					add_trait = inbred
				}					
			}
			if = {
				limit = {
					NOT = { trait = strong }
					NOT = { trait = weak }				
					father_even_if_dead  = { trait = strong }
				}
				random = {
					chance = 25
					add_trait = strong
				}					
			}
			if = {
				limit = {
					NOT = { trait = strong }
					NOT = { trait = weak }	
					mother = { trait = strong }
				}
				random = {
					chance = 25
					add_trait = strong
				}					
			}
			if = {
				limit = {
					NOT = { trait = strong }
					NOT = { trait = weak }	
					father_even_if_dead  = { trait = weak }
				}
				random = {
					chance = 25
					add_trait = weak
				}					
			}
			if = {
				limit = {
					NOT = { trait = strong }
					NOT = { trait = weak }	
					mother = { trait = weak }
				}
				random = {
					chance = 25
					add_trait = weak
				}					
			}
			#add family opinions
			any_sibling = {
				hidden_tooltip = {
					reverse_remove_opinion = {
						modifier = opinion_sibling
						who = ROOT
					}	
				}
				reverse_opinion = {
					modifier = opinion_sibling
					who = ROOT
					years = 100
				}
				hidden_tooltip = {
					remove_opinion = {
						modifier = opinion_sibling
						who = ROOT
					}		
				}
				opinion = {
					modifier = opinion_sibling
					who = ROOT
					years = 100
				}				
				any_child = {
					if = {
						limit = {
							is_female = no
						}
						hidden_tooltip = {
							reverse_remove_opinion = {
								modifier = opinion_nephew
								who = ROOT					
							}
						}
						reverse_opinion = {
							modifier = opinion_nephew
							who = ROOT
							years = 100
						}
					}
					if = {
						limit = {
							is_female = yes
						}
						hidden_tooltip = {
							reverse_remove_opinion = {
								modifier = opinion_niece
								who = ROOT					
							}
						}
						reverse_opinion = {
							modifier = opinion_niece
							who = ROOT
							years = 100
						}
					}
					if = {
						limit = {
							ROOT = { is_female = no }
						}
						hidden_tooltip = {
							remove_opinion = {
								modifier = opinion_uncle
								who = ROOT					
							}
						}
						opinion = {
							modifier = opinion_uncle
							who = ROOT
							years = 100
						}
					}
					if = {
						limit = {
							ROOT = { is_female = yes }
						}
						hidden_tooltip = {
							remove_opinion = {
								modifier = opinion_aunt
								who = ROOT					
							}
						}
						opinion = {
							modifier = opinion_aunt
							who = ROOT
							years = 100
						}
					}				
				}
			}
			any_child = {
				any_child = {
					hidden_tooltip = {
						reverse_remove_opinion = {
							modifier = opinion_grandchild
							who = ROOT
						}	
					}
					reverse_opinion = {
						modifier = opinion_grandchild
						who = ROOT
						years = 100
					}
					if = {
						limit = {
							ROOT = { is_female = no }
						}
						hidden_tooltip = {
							remove_opinion = {
								modifier = opinion_grandfather
								who = ROOT					
							}
						}
						opinion = {
							modifier = opinion_grandfather
							who = ROOT
							years = 100
						}
					}
					if = {
						limit = {
							ROOT = { is_female = yes }
						}
						hidden_tooltip = {
							remove_opinion = {
								modifier = opinion_grandmother
								who = ROOT					
							}	
						}
						opinion = {
							modifier = opinion_grandmother
							who = ROOT
							years = 100
						}
					}					
				}
			}
			father = {
				any_sibling = {
					if = {
						limit = {
							is_female = no
						}
						hidden_tooltip = {
							reverse_remove_opinion = {
								modifier = opinion_uncle
								who = ROOT
							}	
						}
						reverse_opinion = {
							modifier = opinion_uncle
							who = ROOT
							years = 100
						}
					}
					if = {
						limit = {
							is_female = yes
						}
						hidden_tooltip = {
							reverse_remove_opinion = {
								modifier = opinion_aunt
								who = ROOT
							}	
						}
						reverse_opinion = {
							modifier = opinion_aunt
							who = ROOT
							years = 100
						}
					}
					if = {
						limit = {
							ROOT = { is_female = no }
						}
						hidden_tooltip = {
							remove_opinion = {
								modifier = opinion_nephew
								who = ROOT					
							}
						}
						opinion = {
							modifier = opinion_nephew
							who = ROOT
							years = 100
						}
					}
					if = {
						limit = {
							ROOT = { is_female = yes }
						}
						hidden_tooltip = {
							remove_opinion = {
								modifier = opinion_niece
								who = ROOT					
							}	
						}
						opinion = {
							modifier = opinion_niece
							who = ROOT
							years = 100
						}
					}					
				}
				hidden_tooltip = {
					reverse_remove_opinion = {
						modifier = opinion_father
						who = ROOT
						years = 100
					}	
				}
				reverse_opinion = {
					modifier = opinion_father
					who = ROOT
					years = 100
				}
				father = {	
					hidden_tooltip = {
						reverse_remove_opinion = {
							modifier = opinion_grandfather
							who = ROOT
						}	
					}
					reverse_opinion = {
						modifier = opinion_grandfather
						who = ROOT
						years = 100
					}
					hidden_tooltip = {
						remove_opinion = {
							modifier = opinion_grandchild
							who = ROOT
						}
					}
					opinion = {
						modifier = opinion_grandchild
						who = ROOT
						years = 100
					}					
				}
				mother = {
					hidden_tooltip = {
						reverse_remove_opinion = {
							modifier = opinion_grandmother
							who = ROOT
						}	
					}
					reverse_opinion = {
						modifier = opinion_grandmother
						who = ROOT
						years = 100
					}
					hidden_tooltip = {
						remove_opinion = {
							modifier = opinion_grandchild
							who = ROOT
						}		
					}
					opinion = {
						modifier = opinion_grandchild
						who = ROOT
						years = 100
					}					
				}
			}

			mother = {
				any_sibling = {
					if = {
						limit = {
							is_female = no
						}
						hidden_tooltip = {
							reverse_remove_opinion = {
								modifier = opinion_uncle
								who = ROOT
							}	
						}
						reverse_opinion = {
							modifier = opinion_uncle
							who = ROOT
							years = 100
						}
					}
					if = {
						limit = {
							is_female = yes
						}
						hidden_tooltip = {
							reverse_remove_opinion = {
								modifier = opinion_aunt
								who = ROOT
							}	
						}
						reverse_opinion = {
							modifier = opinion_aunt
							who = ROOT
							years = 100
						}
					}
					if = {
						limit = {
							ROOT = { is_female = no }
						}
						hidden_tooltip = {
							remove_opinion = {
								modifier = opinion_nephew
								who = ROOT					
							}
						}
						opinion = {
							modifier = opinion_nephew
							who = ROOT
							years = 100
						}
					}
					if = {
						limit = {
							ROOT = { is_female = yes }
						}
						hidden_tooltip = {
							remove_opinion = {
								modifier = opinion_niece
								who = ROOT					
							}	
						}
						opinion = {
							modifier = opinion_niece
							who = ROOT
							years = 100
						}
					}					
				}
				hidden_tooltip = {
					reverse_remove_opinion = {
						modifier = opinion_mother
						who = ROOT
						years = 100
					}	
				}
				reverse_opinion = {
					modifier = opinion_mother
					who = ROOT
					years = 100
				}
				father = {	
					hidden_tooltip = {
						reverse_remove_opinion = {
							modifier = opinion_grandfather
							who = ROOT
						}	
					}
					reverse_opinion = {
						modifier = opinion_grandfather
						who = ROOT
						years = 100
					}
					hidden_tooltip = {
						remove_opinion = {
							modifier = opinion_grandchild
							who = ROOT
						}
					}
					opinion = {
						modifier = opinion_grandchild
						who = ROOT
						years = 100
					}					
				}
				mother = {
					hidden_tooltip = {
						reverse_remove_opinion = {
							modifier = opinion_grandmother
							who = ROOT
						}	
					}
					reverse_opinion = {
						modifier = opinion_grandmother
						who = ROOT
						years = 100
					}
					hidden_tooltip = {
						remove_opinion = {
							modifier = opinion_grandchild
							who = ROOT
						}		
					}
					opinion = {
						modifier = opinion_grandchild
						who = ROOT
						years = 100
					}					
				}
			}			
		}
	}
}