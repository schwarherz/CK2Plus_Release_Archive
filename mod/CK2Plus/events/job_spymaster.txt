##############################
# SPYMASTER
#
# Job: action_uncover_plots
# 	929: Plot Uncovered
# 	930: Reveal new succession law
# 	931: The Spymaster is attacked by a Noble's thugs (Gets away, Is wounded, Is maimed, Is killed)
#
# Job: action_study_technology
# 	932: The Spymaster studies foreign technology
# 	933: The Spymaster is discovered by the local count - chance of imprisonment
#
# Job: action_organize_spies
# 	935: Find homosexual
# 	936: Corruption
#
##############################


##############################
# SPYMASTER
# JOB: action_uncover_plots
##############################

# 929: Plot Uncovered
character_event = {
	id = 929
	title = "EVTNAME929"
	desc = "EVTDESC929"
	picture = GFX_evt_council
	
	capable_only = yes
	prisoner = no
	
	trigger = {
		has_job_action = action_uncover_plots
		location = {
			any_province_character = {
				NOT = { is_liege_of = ROOT }
				NOT = { character = ROOT }
				OR = {
					has_objective = plot_gain_vassal_title
					has_objective = plot_gain_title
					has_objective = plot_weaken_fellow_vassal
					has_objective = plot_institute_hereditary_titles
					has_objective = plot_kidnap_liege
					has_objective = plot_succ_seniority
					has_objective = plot_succ_primogeniture
					has_objective = plot_succ_gavelkind
					has_objective = plot_succ_feudal_elective
					has_objective = plot_kill_character
					has_objective = plot_kill_spouse
					has_objective = plot_lower_crown_authority
				}
			}
		}
	}
	
	mean_time_to_happen = {
		months = 120

		modifier = {
			factor = 0.9
			liege = { ai = no }
			NOT = { difficulty = 1 }
		}
		modifier = {
			factor = 0.9
			liege = { ai = no }
			NOT = { difficulty = 2 }
		}	
		modifier = {
			factor = 1.1
			liege = { ai = no }
			difficulty = 3
		}
		modifier = {
			factor = 1.1
			liege = { ai = no }
			difficulty = 4
		}
		modifier = {
			factor = 3.0
			liege = { ai = yes }
		}
		modifier = {
			factor = 1.1
			NOT = { opinion = { who = liege value = -100 } }
		}
		modifier = {
			factor = 1.1
			NOT = { opinion = { who = liege value = -75 } }
		}
		modifier = {
			factor = 1.1
			NOT = { opinion = { who = liege value = -50 } }
		}
		modifier = {
			factor = 1.1
			NOT = { opinion = { who = liege value = -25 } }
		}
		modifier = {
			factor = 0.95
			opinion = { who = liege value = 25 }
		}
		modifier = {
			factor = 0.95
			opinion = { who = liege value = 50 }
		}
		modifier = {
			factor = 0.95
			opinion = { who = liege value = 75 }
		}
		modifier = {
			factor = 0.95
			opinion = { who = liege value = 100 }
		}		
		modifier = {
			factor = 1.05
			NOT = { intrigue = 1 }
		}		
		modifier = {
			factor = 1.05
			NOT = { intrigue = 2 }
		}
		modifier = {
			factor = 1.05
			NOT = { intrigue = 3 }
		}
		modifier = {
			factor = 1.05
			NOT = { intrigue = 4 }
		}
		modifier = {
			factor = 1.05
			NOT = { intrigue = 5 }
		}
		modifier = {
			factor = 1.05
			NOT = { intrigue = 6 }
		}
		modifier = {
			factor = 1.05
			NOT = { intrigue = 7 }
		}
		modifier = {
			factor = 1.05
			NOT = { intrigue = 8 }
		}
		modifier = {
			factor = 1.05
			NOT = { intrigue = 9 }
		}
		modifier = {
			factor = 0.95
			intrigue = 11
		}		
		modifier = {
			factor = 0.95
			intrigue = 12
		}	
		modifier = {
			factor = 0.95
			intrigue = 13
		}	
		modifier = {
			factor = 0.95
			intrigue = 14
		}	
		modifier = {
			factor = 0.95
			intrigue = 15
		}
		modifier = {
			factor = 0.95
			intrigue = 16
		}
		modifier = {
			factor = 0.95
			intrigue = 17
		}	
		modifier = {
			factor = 0.95
			intrigue = 18
		}
		modifier = {
			factor = 0.95
			intrigue = 19
		}
		modifier = {
			factor = 0.95
			intrigue = 20
		}
		modifier = {
			factor = 0.95
			intrigue = 21
		}
		modifier = {
			factor = 0.95
			intrigue = 22
		}
		modifier = {
			factor = 0.95
			intrigue = 23
		}
		modifier = {
			factor = 0.95
			intrigue = 24
		}
		modifier = {
			factor = 0.95
			intrigue = 25
		}
	}
	
	option = {
		name = "EVTOPTA929"
		hidden_tooltip = {
			location = {
				random_province_character = {
					limit = {
						NOT = { is_liege_of = ROOT }
						NOT = { character = ROOT }
						OR = {
							has_objective = plot_gain_vassal_title
							has_objective = plot_gain_title
							has_objective = plot_weaken_fellow_vassal
							has_objective = plot_institute_hereditary_titles
							has_objective = plot_kidnap_liege
							has_objective = plot_succ_seniority
							has_objective = plot_succ_primogeniture
							has_objective = plot_succ_gavelkind
							has_objective = plot_succ_feudal_elective
							has_objective = plot_kill_character
							has_objective = plot_kill_spouse
							has_objective = plot_lower_crown_authority
						}
					}
					character_event = { id = 20290 days = 7 }
				}
			}
		}
	}
}

# 20290 - The plotter is informed
character_event = {
	id = 20290
	desc = "EVTDESC20290"
	picture = GFX_evt_spymaster
	
	is_triggered_only = yes
	
	option = {
		name = "EVTOPTA20290"
		trigger = { ai = no }
	}
	option = {
		name = "EVTOPTB20290"
		trigger = { ai = yes }
		ai_chance = {
			factor = 50
			modifier = {
				factor = 2.0
				NOT = { opinion = { who = FROM value = 0 } }
			}
			modifier = {
				factor = 2.0
				NOT = { opinion = { who = FROM value = -25 } }
			}
			modifier = {
				factor = 2.0
				NOT = { opinion = { who = FROM value = -50 } }
			}
		}
		FROM = {
			random_list = {
				50 = {
					set_character_flag = was_murdered_by_plot
					death = {
						death_reason = death_murder
						killer = ROOT
					}
				}
				50 = {
					character_event = { id = 20291 days = 1 }
				}
			}
		}
	}
	option = {
		name = "EVTOPTC20290"
		ai_chance = {
			factor = 50
			modifier = {
				factor = 2.0
				opinion = { who = FROM value = 0 }
			}
			modifier = {
				factor = 2.0
				opinion = { who = FROM value = 25 }
			}
			modifier = {
				factor = 2.0
				opinion = { who = FROM value = 50 }
			}
		}
	}
}

# 20291 - Assassination attempt on the spymaster fails
character_event = {
	id = 20291
	desc = "EVTDESC20291"
	picture = GFX_evt_shadow
	
	is_triggered_only = yes
	
	option = {
		name = "EVTOPTA20291"
		opinion = {
			modifier = attempted_murder
			who = FROM
			years = 10
		}
		hidden_tooltip = {
			liege = { letter_event = { id = 20292 days = 1 } }
		}
	}
}

#20292 - Spymaster informs liege about assassination attempt and plot
letter_event = {
	id = 20292
	desc = "EVTDESC20292"
	
	is_triggered_only = yes
	
	option = {
		name = "EVTOPTA20292"
		FROM = {
			FROM = {
				reveal_plot = yes
			}
		}
	}
}

#20293 - Liege writes to plotter
character_event = {
	id = 20293
	desc = "EVTDESC20293"
	picture = GFX_evt_recieve_letter
	
	is_triggered_only = yes
	
	option = {
		name = "EVTOPTA20293"
		FROM = {
			opinion = {
				modifier = scheming_bastard
				who = ROOT
				years = 10
			}
		}
	}
}

# 931: The Spymaster is attacked by a Noble's thugs (Gets away, Is wounded, Is maimed, Is killed)
character_event = {
	id = 931
	title = "EVTNAME931"
	desc = "EVTDESC931"
	picture = GFX_evt_peasants

	capable_only = yes
	prisoner = no
	
	trigger = {
		has_job_action = action_uncover_plots
		location = {
			any_province_lord = {
				NOT = { is_liege_of = ROOT }
				NOT = { character = ROOT }
				OR = {
					has_objective = plot_gain_vassal_title
					has_objective = plot_gain_title
					has_objective = plot_weaken_fellow_vassal
					has_objective = plot_institute_hereditary_titles
					has_objective = plot_kidnap_liege
					has_objective = plot_succ_seniority
					has_objective = plot_succ_primogeniture
					has_objective = plot_succ_gavelkind
					has_objective = plot_succ_feudal_elective
					has_objective = plot_kill_character
					has_objective = plot_kill_spouse
					has_objective = plot_lower_crown_authority
				}
			}
		}
	}
	
	mean_time_to_happen = {
		months = 120

		modifier = {
			factor = 1.1
			liege = { ai = no }
			NOT = { difficulty = 1 }
		}
		modifier = {
			factor = 1.1
			liege = { ai = no }
			NOT = { difficulty = 2 }
		}	
		modifier = {
			factor = 0.9
			liege = { ai = no }
			difficulty = 3
		}
		modifier = {
			factor = 0.9
			liege = { ai = no }
			difficulty = 4
		}
		modifier = {
			factor = 3.0
			liege = { ai = yes }
		}
		modifier = {
			factor = 0.9
			NOT = { opinion = { who = liege value = -100 } }
		}
		modifier = {
			factor = 0.9
			NOT = { opinion = { who = liege value = -75 } }
		}
		modifier = {
			factor = 0.9
			NOT = { opinion = { who = liege value = -50 } }
		}
		modifier = {
			factor = 0.9
			NOT = { opinion = { who = liege value = -25 } }
		}
		modifier = {
			factor = 1.05
			opinion = { who = liege value = 25 }
		}
		modifier = {
			factor = 1.05
			opinion = { who = liege value = 50 }
		}
		modifier = {
			factor = 1.05
			opinion = { who = liege value = 75 }
		}
		modifier = {
			factor = 1.05
			opinion = { who = liege value = 100 }
		}		
		modifier = {
			factor = 0.95
			NOT = { intrigue = 1 }
		}		
		modifier = {
			factor = 0.95
			NOT = { intrigue = 2 }
		}
		modifier = {
			factor = 0.95
			NOT = { intrigue = 3 }
		}
		modifier = {
			factor = 0.95
			NOT = { intrigue = 4 }
		}
		modifier = {
			factor = 0.95
			NOT = { intrigue = 5 }
		}
		modifier = {
			factor = 0.95
			NOT = { intrigue = 6 }
		}
		modifier = {
			factor = 0.95
			NOT = { intrigue = 7 }
		}
		modifier = {
			factor = 0.95
			NOT = { intrigue = 8 }
		}
		modifier = {
			factor = 0.95
			NOT = { intrigue = 9 }
		}
		modifier = {
			factor = 1.05
			intrigue = 11
		}		
		modifier = {
			factor = 1.05
			intrigue = 12
		}	
		modifier = {
			factor = 1.05
			intrigue = 13
		}	
		modifier = {
			factor = 1.05
			intrigue = 14
		}	
		modifier = {
			factor = 1.05
			intrigue = 15
		}
		modifier = {
			factor = 1.05
			intrigue = 16
		}
		modifier = {
			factor = 1.05
			intrigue = 17
		}	
		modifier = {
			factor = 1.05
			intrigue = 18
		}
		modifier = {
			factor = 1.05
			intrigue = 19
		}
		modifier = {
			factor = 1.05
			intrigue = 20
		}
		modifier = {
			factor = 1.05
			intrigue = 21
		}
		modifier = {
			factor = 1.05
			intrigue = 22
		}
		modifier = {
			factor = 1.05
			intrigue = 23
		}
		modifier = {
			factor = 1.05
			intrigue = 24
		}
		modifier = {
			factor = 1.05
			intrigue = 25
		}
	}
	
	option = {
		name = "EVTOPTA902"
		trigger = {
			NOT = { martial = 5 }
		}
		random_list = {
			25 = { character_event = { id = 20310 tooltip = "EVTTOOLTIP20310" } }
			50 = { character_event = { id = 20311 tooltip = "EVTTOOLTIP20311" } }
			25 = {
				death = { death_reason = death_murder_unknown }
				hidden_tooltip = {
					liege = { character_event = { id = 20313 } }
				}
			}
		}
	}
	option = {
		name = "EVTOPTA902"
		trigger = {
			martial = 5
			NOT = { martial = 10 }
		}
		random_list = {
			35 = { character_event = { id = 20310 tooltip = "EVTTOOLTIP20310" } }
			50 = { character_event = { id = 20311 tooltip = "EVTTOOLTIP20311" } }
			15 = {
				death = { death_reason = death_murder_unknown }
				hidden_tooltip = {
					liege = { character_event = { id = 20313 } }
				}
			}
		}
	}
	option = {
		name = "EVTOPTA902"
		trigger = {
			martial = 10
		}
		random_list = {
			50 = { character_event = { id = 20310 tooltip = "EVTTOOLTIP20310" } }
			40 = { character_event = { id = 20311 tooltip = "EVTTOOLTIP20311" } }
			10 = {
				death = { death_reason = death_murder_unknown }
				hidden_tooltip = {
					liege = { character_event = { id = 20313 } }
				}
			}
		}
	}
}

# 20310: Spymaster gets away
character_event = {
	id = 20310
	desc = "EVTDESC20310"
	picture = GFX_evt_courier
	
	is_triggered_only = yes
	
	option = {
		name = "EVTOPTA20310"
		prestige = -10
	}
}

# 20311: Spymaster gets wounded
character_event = {
	id = 20311
	desc = "EVTDESC20311"
	picture = GFX_evt_illness
	
	is_triggered_only = yes
	
	option = {
		name = "EVTOPTA20311"
		add_trait = wounded
		liege = { letter_event = { id = 20312 days = 7 tooltip = "EVTTOOLTIP20022" } }
	}
}

# 20312: Inform the Liege about wounding
letter_event = {
	id = 20312
	desc = "EVTDESC20312"
	
	is_triggered_only = yes
	
	option = {
		name = "EVTOPTA20312"
		prestige = -10
	}
}

# 20313: Inform the Liege about death
character_event = {
	id = 20313
	desc = "EVTDESC20313"
	picture = GFX_evt_death
	
	is_triggered_only = yes
	
	option = {
		name = "EVTOPTA20313"
		prestige = -15
	}
}


##############################
# SPYMASTER
# JOB: action_study_technology
##############################

# 932: The Spymaster studies foreign technology
character_event = {
	id = 932
	title = "EVTNAME932"
	desc = "EVTDESC932"
	picture = GFX_evt_library
	
	capable_only = yes
	prisoner = no
	
	trigger = {
		has_job_action = action_study_technology
		location = { has_higher_tech_than = ROOT }
	}
	
	mean_time_to_happen = {
		months = 240

		modifier = {
			factor = 0.9
			liege = { ai = no }
			NOT = { difficulty = 1 }
		}
		modifier = {
			factor = 0.9
			liege = { ai = no }
			NOT = { difficulty = 2 }
		}	
		modifier = {
			factor = 1.1
			liege = { ai = no }
			difficulty = 3
		}
		modifier = {
			factor = 1.1
			liege = { ai = no }
			difficulty = 4
		}
		modifier = {
			factor = 3.0
			liege = { ai = yes }
		}
		modifier = {
			factor = 1.1
			NOT = { opinion = { who = liege value = -100 } }
		}
		modifier = {
			factor = 1.1
			NOT = { opinion = { who = liege value = -75 } }
		}
		modifier = {
			factor = 1.1
			NOT = { opinion = { who = liege value = -50 } }
		}
		modifier = {
			factor = 1.1
			NOT = { opinion = { who = liege value = -25 } }
		}
		modifier = {
			factor = 0.95
			opinion = { who = liege value = 25 }
		}
		modifier = {
			factor = 0.95
			opinion = { who = liege value = 50 }
		}
		modifier = {
			factor = 0.95
			opinion = { who = liege value = 75 }
		}
		modifier = {
			factor = 0.95
			opinion = { who = liege value = 100 }
		}		
		modifier = {
			factor = 1.05
			NOT = { intrigue = 1 }
		}		
		modifier = {
			factor = 1.05
			NOT = { intrigue = 2 }
		}
		modifier = {
			factor = 1.05
			NOT = { intrigue = 3 }
		}
		modifier = {
			factor = 1.05
			NOT = { intrigue = 4 }
		}
		modifier = {
			factor = 1.05
			NOT = { intrigue = 5 }
		}
		modifier = {
			factor = 1.05
			NOT = { intrigue = 6 }
		}
		modifier = {
			factor = 1.05
			NOT = { intrigue = 7 }
		}
		modifier = {
			factor = 1.05
			NOT = { intrigue = 8 }
		}
		modifier = {
			factor = 1.05
			NOT = { intrigue = 9 }
		}
		modifier = {
			factor = 0.95
			intrigue = 11
		}		
		modifier = {
			factor = 0.95
			intrigue = 12
		}	
		modifier = {
			factor = 0.95
			intrigue = 13
		}	
		modifier = {
			factor = 0.95
			intrigue = 14
		}	
		modifier = {
			factor = 0.95
			intrigue = 15
		}
		modifier = {
			factor = 0.95
			intrigue = 16
		}
		modifier = {
			factor = 0.95
			intrigue = 17
		}	
		modifier = {
			factor = 0.95
			intrigue = 18
		}
		modifier = {
			factor = 0.95
			intrigue = 19
		}
		modifier = {
			factor = 0.95
			intrigue = 20
		}
		modifier = {
			factor = 0.95
			intrigue = 21
		}
		modifier = {
			factor = 0.95
			intrigue = 22
		}
		modifier = {
			factor = 0.95
			intrigue = 23
		}
		modifier = {
			factor = 0.95
			intrigue = 24
		}
		modifier = {
			factor = 0.95
			intrigue = 25
		}
	}

	option = {
		name = "EVTOPTA932"
		liege = { letter_event = { id = 20320 tooltip = "EVTTOOLTIP20320" } }
	}
}

# The Spymaster informs his liege of the success
letter_event = {
	id = 20320
	desc = "EVTDESC20320"
	
	is_triggered_only = yes
	
	option = {
		name = "EVTOPTA20320"
		FROM = {
			location = {
				steal_random_tech = ROOT
			}
		}
	}
}

# 933: The Spymaster is discovered by the local count - chance of imprisonment
character_event = {
	id = 933
	title = "EVTNAME933"
	desc = "EVTDESC933"
	picture = GFX_evt_spymaster
	
	capable_only = yes
	prisoner = no
	
	trigger = {
		has_job_action = action_study_technology
		location = { has_higher_tech_than = ROOT }
		location = {
			any_province_lord = {
				NOT = { is_liege_of = ROOT }
				NOT = { character = ROOT }
				OR = {
					intrigue = 10
					job_spymaster = {
						intrigue = 10
					}
				}
			}
		}
	}
	
	mean_time_to_happen = {
		months = 120

		modifier = {
			factor = 1.1
			liege = { ai = no }
			NOT = { difficulty = 1 }
		}
		modifier = {
			factor = 1.1
			liege = { ai = no }
			NOT = { difficulty = 2 }
		}	
		modifier = {
			factor = 0.9
			liege = { ai = no }
			difficulty = 3
		}
		modifier = {
			factor = 0.9
			liege = { ai = no }
			difficulty = 4
		}
		modifier = {
			factor = 3.0
			liege = { ai = yes }
		}
		modifier = {
			factor = 0.9
			NOT = { opinion = { who = liege value = -100 } }
		}
		modifier = {
			factor = 0.9
			NOT = { opinion = { who = liege value = -75 } }
		}
		modifier = {
			factor = 0.9
			NOT = { opinion = { who = liege value = -50 } }
		}
		modifier = {
			factor = 0.9
			NOT = { opinion = { who = liege value = -25 } }
		}
		modifier = {
			factor = 1.05
			opinion = { who = liege value = 25 }
		}
		modifier = {
			factor = 1.05
			opinion = { who = liege value = 50 }
		}
		modifier = {
			factor = 1.05
			opinion = { who = liege value = 75 }
		}
		modifier = {
			factor = 1.05
			opinion = { who = liege value = 100 }
		}		
		modifier = {
			factor = 0.95
			NOT = { intrigue = 1 }
		}		
		modifier = {
			factor = 0.95
			NOT = { intrigue = 2 }
		}
		modifier = {
			factor = 0.95
			NOT = { intrigue = 3 }
		}
		modifier = {
			factor = 0.95
			NOT = { intrigue = 4 }
		}
		modifier = {
			factor = 0.95
			NOT = { intrigue = 5 }
		}
		modifier = {
			factor = 0.95
			NOT = { intrigue = 6 }
		}
		modifier = {
			factor = 0.95
			NOT = { intrigue = 7 }
		}
		modifier = {
			factor = 0.95
			NOT = { intrigue = 8 }
		}
		modifier = {
			factor = 0.95
			NOT = { intrigue = 9 }
		}
		modifier = {
			factor = 1.05
			intrigue = 11
		}		
		modifier = {
			factor = 1.05
			intrigue = 12
		}	
		modifier = {
			factor = 1.05
			intrigue = 13
		}	
		modifier = {
			factor = 1.05
			intrigue = 14
		}	
		modifier = {
			factor = 1.05
			intrigue = 15
		}
		modifier = {
			factor = 1.05
			intrigue = 16
		}
		modifier = {
			factor = 1.05
			intrigue = 17
		}	
		modifier = {
			factor = 1.05
			intrigue = 18
		}
		modifier = {
			factor = 1.05
			intrigue = 19
		}
		modifier = {
			factor = 1.05
			intrigue = 20
		}
		modifier = {
			factor = 1.05
			intrigue = 21
		}
		modifier = {
			factor = 1.05
			intrigue = 22
		}
		modifier = {
			factor = 1.05
			intrigue = 23
		}
		modifier = {
			factor = 1.05
			intrigue = 24
		}
		modifier = {
			factor = 1.05
			intrigue = 25
		}
	}

	option = {
		name = "EVTOPTA933"
		location = {
			random_province_lord = {
				limit = {
					NOT = { is_liege_of = ROOT }
					NOT = { character = ROOT }
					job_spymaster = {
						intrigue = 10
					}
				}
				character_event = { id = 20330 days = 2 tooltip = "EVTTOOLTIP20330" }
			}
		}
	}
}

#20330: Local noble reacts
character_event = {
	id = 20330
	desc = "EVTDESC20330"
	picture = GFX_evt_spymaster
	
	is_triggered_only = yes
	
	option = {
		name = "EVOPTA20330"
		ai_chance = { factor = 50 }
		FROM = {
			opinion = {
				who = ROOT
				modifier = opinion_arrest_attempt
				months = 240
			}		
			imprison = ROOT
			liege = {
				letter_event = { id = 20331 days = 7 tooltip = "EVTTOOLTIP20331" }
				opinion = {
					modifier = opinion_furious
					who = ROOT
					years = 5
				}
			}
		}
	}
	option = {
		name = "EVOPTB20330"
		ai_chance = { factor = 50 }
		FROM = {
			letter_event = { id = 20332 days = 7 tooltip = "EVTTOOLTIP20332" }
		}
	}
}

#20331: Liege get the news - Chancellor Imprisoned
letter_event = {
	id = 20331
	desc = "EVTDESC20331"
	
	is_triggered_only = yes
	
	option = {
		name = "EVTOPTA20331"
		FROM = {
			opinion = {
				modifier = opinion_dishonorable_scum
				who = ROOT
				years = 5
			}
		}
	}
}

#20332: Spymaster get the news: is free to go
letter_event = {
	id = 20332
	desc = "EVTDESC20332"
	
	is_triggered_only = yes
	
	option = {
		name = "EVTOPTA20332"
		reverse_opinion = {
			modifier = opinion_grateful
			who = FROM
			years = 5
		}
	}
}


##############################
# SPYMASTER
# JOB: action_organize_spies
##############################

# 935: Vicious Rumors Spread
character_event = {
	id = 935
	title = "EVTNAME935"
	desc = "EVTDESC935"
	picture = GFX_evt_whispers

	capable_only = yes
	prisoner = no
	
	trigger = {
		has_job_action = action_organize_spies
		location = {
			any_province_lord = {
				NOT = { is_liege_of = ROOT }
				NOT = { character = ROOT }
				ROOT = {
					liege = {
						NOT = { opinion = { who = PREVPREV value = 0 } }
					}
				}
				num_of_vassals = 1
			}
		}
	}
	
	mean_time_to_happen = {
		months = 240

		modifier = {
			factor = 3.0
			liege = { ai = yes }
		}
		modifier = {
			factor = 0.9
			liege = { ai = no }
			NOT = { difficulty = 1 }
		}
		modifier = {
			factor = 0.9
			liege = { ai = no }
			NOT = { difficulty = 2 }
		}	
		modifier = {
			factor = 1.1
			liege = { ai = no }
			difficulty = 3
		}
		modifier = {
			factor = 1.1
			liege = { ai = no }
			difficulty = 4
		}		
		modifier = {
			factor = 1.1
			NOT = { opinion = { who = liege value = -100 } }
		}
		modifier = {
			factor = 1.1
			NOT = { opinion = { who = liege value = -75 } }
		}
		modifier = {
			factor = 1.1
			NOT = { opinion = { who = liege value = -50 } }
		}
		modifier = {
			factor = 1.1
			NOT = { opinion = { who = liege value = -25 } }
		}
		modifier = {
			factor = 0.95
			opinion = { who = liege value = 25 }
		}
		modifier = {
			factor = 0.95
			opinion = { who = liege value = 50 }
		}
		modifier = {
			factor = 0.95
			opinion = { who = liege value = 75 }
		}
		modifier = {
			factor = 0.95
			opinion = { who = liege value = 100 }
		}		
		modifier = {
			factor = 1.05
			NOT = { intrigue = 1 }
		}		
		modifier = {
			factor = 1.05
			NOT = { intrigue = 2 }
		}
		modifier = {
			factor = 1.05
			NOT = { intrigue = 3 }
		}
		modifier = {
			factor = 1.05
			NOT = { intrigue = 4 }
		}
		modifier = {
			factor = 1.05
			NOT = { intrigue = 5 }
		}
		modifier = {
			factor = 1.05
			NOT = { intrigue = 6 }
		}
		modifier = {
			factor = 1.05
			NOT = { intrigue = 7 }
		}
		modifier = {
			factor = 1.05
			NOT = { intrigue = 8 }
		}
		modifier = {
			factor = 1.05
			NOT = { intrigue = 9 }
		}
		modifier = {
			factor = 0.95
			intrigue = 11
		}		
		modifier = {
			factor = 0.95
			intrigue = 12
		}	
		modifier = {
			factor = 0.95
			intrigue = 13
		}	
		modifier = {
			factor = 0.95
			intrigue = 14
		}	
		modifier = {
			factor = 0.95
			intrigue = 15
		}
		modifier = {
			factor = 0.95
			intrigue = 16
		}
		modifier = {
			factor = 0.95
			intrigue = 17
		}	
		modifier = {
			factor = 0.95
			intrigue = 18
		}
		modifier = {
			factor = 0.95
			intrigue = 19
		}
		modifier = {
			factor = 0.95
			intrigue = 20
		}
		modifier = {
			factor = 0.95
			intrigue = 21
		}
		modifier = {
			factor = 0.95
			intrigue = 22
		}
		modifier = {
			factor = 0.95
			intrigue = 23
		}
		modifier = {
			factor = 0.95
			intrigue = 24
		}
		modifier = {
			factor = 0.95
			intrigue = 25
		}
	}
	
	option = {
		name = "EVTOPTA935"
		hidden_tooltip = {
			location = {
				random_province_lord = {
					limit = {
						NOT = { is_liege_of = ROOT }
						NOT = { character = ROOT }
						ROOT = {
							liege = {
								NOT = { opinion = { who = PREVPREV value = 0 } }
							}
						}
						trait = homosexual
						is_female = no
						num_of_vassals = 1
					}
					set_character_flag = vicious_rumor
				}
			}
			liege = { letter_event = { id = 20350 days = 7 } }
		}
	}
}

# 20350 - Liege is informed
letter_event = {
	id = 20350
	desc = "EVTDESC20350"
	
	is_triggered_only = yes
	
	option = {
		name = "EVTOPTA20350"
		ai_chance = { factor = 30 }
		hidden_tooltip = {
			FROM = {
				character_event = { id = 20351 days = 7 }
			}
		}
	}
	option = {
		name = "EVTOPTB20350"
		ai_chance = { factor = 70 }
		hidden_tooltip = {
			FROM = {
				character_event = { id = 20352 days = 7 }
			}
		}
	}
	option = {
		name = "EVTOPTC20350"
		ai_chance = { factor = 0 }
		hidden_tooltip = {
			FROM = {
				character_event = { id = 20353 days = 7 }
			}
		}
	}
}

#20351 - Blackmail him
character_event = {
	id = 20351
	desc = "EVTDESC20351"
	picture = GFX_evt_whispers
	
	is_triggered_only = yes
	
	option = {
		name = "EVTOPTA20351"
		hidden_tooltip = {
			location = {
				random_province_lord = {
					limit = {
						NOT = { is_liege_of = ROOT }
						NOT = { character = ROOT }
						ROOT = {
							liege = {
								NOT = { opinion = { who = PREVPREV value = 0 } }
							}
						}
						trait = homosexual
						is_female = no
						num_of_vassals = 1
						has_character_flag = vicious_rumor
					}
					set_character_flag = vicious_rumor_blackmail
					character_event = { id = 20354 days = 7 }
				}
			}
		}
	}
}

#20352 - Spread rumors
character_event = {
	id = 20352
	desc = "EVTDESC20352"
	picture = GFX_evt_whispers
	
	is_triggered_only = yes
	
	option = {
		name = "EVTOPTA20352"
		hidden_tooltip = {
			location = {
				random_province_lord = {
					limit = {
						NOT = { is_liege_of = ROOT }
						NOT = { character = ROOT }
						ROOT = {
							liege = {
								NOT = { opinion = { who = PREVPREV value = 0 } }
							}
						}
						trait = homosexual
						is_female = no
						num_of_vassals = 1
						has_character_flag = vicious_rumor
					}
					set_character_flag = vicious_rumor_spread
					character_event = { id = 20355 days = 7 }
				}
			}
		}
	}
}

#20353 - Do nothing
character_event = {
	id = 20353
	desc = "EVTDESC20353"
	picture = GFX_evt_throne_room
	
	is_triggered_only = yes
	
	option = {
		name = "EVTOPTA20353"
		hidden_tooltip = {
			random_province_lord = {
				limit = {
					NOT = { is_liege_of = ROOT }
					NOT = { character = ROOT }
					ROOT = {
						liege = {
							NOT = { opinion = { who = PREVPREV value = 0 } }
						}
					}
					trait = homosexual
					is_female = no
					num_of_vassals = 1
					has_character_flag = vicious_rumor
				}
				clr_character_flag = vicious_rumor
			}
		}
	}
}

#20354 - The noble responds to blackmail
character_event = {
	id = 20354
	desc = "EVTDESC20354"
	picture = GFX_evt_whispers

	hide_from = yes
	
	is_triggered_only = yes
	
	option = {
		name = "EVTOPTA20354"
		ai_chance = { factor = 40 }
		scaled_wealth = -0.25
		hidden_tooltip = {
			FROM = {
				character_event = { id = 20359 days = 1 }
			}
		}
	}
	option = {
		name = "EVTOPTB20354"
		ai_chance = {
			factor = 30
			modifier = {
				factor = 3.0
				OR = {
					trait = wroth
					trait = paranoid
				}
			}
		}
		random_list = {
			50 = {
				FROM = {
					set_character_flag = spymaster_attacked
					character_event = { id = 20356 days = 1 tooltip = "EVTTOOLTIPSPYMASTERATTACK" }
				}
				hidden_tooltip = {
					character_event = { id = 20364 days = 1 }
				}
			}
			50 = {
				FROM = {
					set_character_flag = spymaster_killed
					character_event = { id = 20356 days = 1 tooltip = "EVTTOOLTIPSPYMASTERKILLED" }
				}
				hidden_tooltip = {
					character_event = { id = 20365 days = 1 }
				}
			}
		}
	}
	option = {
		name = "EVTOPTC20354"
		ai_chance = {
			factor = 30
			modifier = {
				factor = 3.0
				OR = {
					trait = proud
					trait = honest
					trait = brave
				}
			}
		}
		prestige = 25
		hidden_tooltip = {
			FROM = {
				character_event = { id = 20361 days = 1 }
			}
		}
	}
}

#20355 - The noble responds to rumor
character_event = {
	id = 20355
	desc = "EVTDESC20355"
	picture = GFX_evt_whispers

	hide_from = yes
	
	is_triggered_only = yes
	
	option = {
		name = "EVTOPTA20355"
		random_list = {
			50 = {
				FROM = {
					set_character_flag = spymaster_attacked
					character_event = { id = 20356 days = 1 tooltip = "EVTTOOLTIPSPYMASTERATTACK" }
				}
				hidden_tooltip = {
					character_event = { id = 20364 days = 1 }
				}
			}
			50 = {
				FROM = {
					set_character_flag = spymaster_killed
					character_event = { id = 20356 days = 1 tooltip = "EVTTOOLTIPSPYMASTERKILLED" }
				}
				hidden_tooltip = {
					character_event = { id = 20365 days = 1 }
				}
			}
		}
	}
	option = {
		name = "EVTOPTB20355"
		prestige = 25
		hidden_tooltip = {
			FROM = {
				character_event = { id = 20361 days = 1 }
			}
		}
	}
}

#20364 - Spymaster gets away
character_event = {
	id = 20364
	desc = "EVTDESC20364"
	picture = GFX_evt_spymaster
	
	is_triggered_only = yes
	
	option = {
		name = "EVTOPTA20364"
		prestige = -10
	}
}

#20365 - Spymaster is killed
character_event = {
	id = 20365
	desc = "EVTDESC20365"
	picture = GFX_evt_death
	
	is_triggered_only = yes
	
	option = {
		name = "EXCELLENT"
	}
}

#20356 - Spymaster is attacked
character_event = {
	id = 20356
	desc = "EVTDESC20356"
	picture = GFX_evt_peasants

	hide_from = yes
	
	is_triggered_only = yes

	option = {
		name = "EVTOPTA20356"
		trigger = { has_character_flag = spymaster_attacked }
		hidden_tooltip = {
			liege = { letter_event = { id = 20357 days = 1 } }
		}
		clr_character_flag = spymaster_attacked
	}
	option = {
		name = "EVTOPTB20356"
		trigger = { has_character_flag = spymaster_killed }
		hidden_tooltip = {
			liege = { character_event = { id = 20358 days = 1 } }
		}
		clr_character_flag = spymaster_killed
		death = {
			death_reason = death_murder
			killer = ROOT
		}
	}
}

#20357 - Inform the Liege about attack
letter_event = {
	id = 20357
	desc = "EVTDESC20357"
	
	is_triggered_only = yes
	
	option = {
		name = "EVTOPTA20357"
		hidden_tooltip = {
			FROM = {
				FROM = {
					character_event = { id = 20363 days = 1 }
				}
			}
		}
	}
}

#20358 - Inform the Liege about death
character_event = {
	id = 20358
	desc = "EVTDESC20358"
	picture = GFX_evt_death

	hide_from = yes
	
	is_triggered_only = yes
	
	option = {
		name = "EVTOPTA20358"
		prestige = -15
		hidden_tooltip = {
			FROM = {
				FROM = {
					clr_character_flag = vicious_rumor
				}
			}
		}
	}
}

#20359 - Blackmail succeeds
character_event = {
	id = 20359
	desc = "EVTDESC20359"
	picture = GFX_evt_whispers

	hide_from = yes
	
	is_triggered_only = yes
	
	option = {
		name = "EVTOPTA20359"
		hidden_tooltip = {
			liege = { letter_event = { id = 20360 days = 1 } }
		}
	}
}

#20360 - Liege is informed that blackmail succeeded
letter_event = {
	id = 20360
	desc = "EVTDESC20360"
	
	is_triggered_only = yes
	
	option = {
		name = "EXCELLENT"
		wealth = 100
		hidden_tooltip = {
			FROM = {
				FROM = {
					clr_character_flag = vicious_rumor
					clr_character_flag = vicious_rumor_blackmail
				}
			}
		}
	}
}

#20361 - The noble does not care about the rumor
character_event = {
	id = 20361
	desc = "EVTDESC20361"
	picture = GFX_evt_whispers

	hide_from = yes
	
	is_triggered_only = yes
	
	option = {
		name = "EVTOPTA20361"
		hidden_tooltip = {
			liege = { letter_event = { id = 20362 days = 1 } }
		}
	}
}

#20362 - Inform the liege that the noble does not care about the rumor
letter_event = {
	id = 20362
	desc = "EVTDESC20362"
	
	is_triggered_only = yes
	
	option = {
		name = "EVTOPTA20362"
		hidden_tooltip = {
			FROM = {
				FROM = {
					character_event = { id = 20363 days = 1 }
				}
			}
		}
	}
}

#20363 - The noble is informed that the rumor has been spread
character_event = {
	id = 20363
	desc = "EVTDESC20363"
	picture = GFX_evt_whispers

	hide_from = yes
	
	is_triggered_only = yes
	
	immediate = {
		hidden_tooltip = {
			any_vassal = {
				limit = {
					NOT = { opinion = { who = ROOT value = 0 } }
					NOT = { trait = homosexual }
				}
				set_character_flag = opinion_liege_homosexual
			}
			any_courtier = {
				limit = {
					NOT = { opinion = { who = ROOT value = 0 } }
					NOT = { trait = homosexual }
				}
				set_character_flag = opinion_liege_homosexual
			}		
		}
	}
	
	option = {
		name = "EVTOPTA20363"
		any_vassal = {
			limit = {
				has_character_flag = opinion_liege_homosexual
			}
			opinion = {
				modifier = opinion_homosexual
				who = ROOT
				years = 5
			}
			clr_character_flag = opinion_liege_homosexual
		}
		any_courtier = {
			limit = {
				has_character_flag = opinion_liege_homosexual
			}
			opinion = {
				modifier = opinion_homosexual
				who = ROOT
				years = 5
			}
			clr_character_flag = opinion_liege_homosexual
		}
	}
}

# 936: Corruption Uncovered
character_event = {
	id = 936
	title = "EVTNAME936"
	desc = "EVTDESC936"
	picture = GFX_evt_whispers

	capable_only = yes
	prisoner = no
	
	trigger = {
		has_job_action = action_organize_spies
		location = {
			any_province_lord = {
				NOT = { is_liege_of = ROOT }
				NOT = { character = ROOT }
				ROOT = {
					liege = {
						NOT = { opinion = { who = PREVPREV value = 0 } }
						same_realm = PREVPREV
					}
				}
			}
		}
	}
	
	mean_time_to_happen = {
		months = 240

		modifier = {
			factor = 3.0
			liege = { ai = yes }
		}
		modifier = {
			factor = 0.9
			liege = { ai = no }
			NOT = { difficulty = 1 }
		}
		modifier = {
			factor = 0.9
			liege = { ai = no }
			NOT = { difficulty = 2 }
		}	
		modifier = {
			factor = 1.1
			liege = { ai = no }
			difficulty = 3
		}
		modifier = {
			factor = 1.1
			liege = { ai = no }
			difficulty = 4
		}		
		modifier = {
			factor = 1.1
			NOT = { opinion = { who = liege value = -100 } }
		}
		modifier = {
			factor = 1.1
			NOT = { opinion = { who = liege value = -75 } }
		}
		modifier = {
			factor = 1.1
			NOT = { opinion = { who = liege value = -50 } }
		}
		modifier = {
			factor = 1.1
			NOT = { opinion = { who = liege value = -25 } }
		}
		modifier = {
			factor = 0.95
			opinion = { who = liege value = 25 }
		}
		modifier = {
			factor = 0.95
			opinion = { who = liege value = 50 }
		}
		modifier = {
			factor = 0.95
			opinion = { who = liege value = 75 }
		}
		modifier = {
			factor = 0.95
			opinion = { who = liege value = 100 }
		}		
		modifier = {
			factor = 1.05
			NOT = { intrigue = 1 }
		}		
		modifier = {
			factor = 1.05
			NOT = { intrigue = 2 }
		}
		modifier = {
			factor = 1.05
			NOT = { intrigue = 3 }
		}
		modifier = {
			factor = 1.05
			NOT = { intrigue = 4 }
		}
		modifier = {
			factor = 1.05
			NOT = { intrigue = 5 }
		}
		modifier = {
			factor = 1.05
			NOT = { intrigue = 6 }
		}
		modifier = {
			factor = 1.05
			NOT = { intrigue = 7 }
		}
		modifier = {
			factor = 1.05
			NOT = { intrigue = 8 }
		}
		modifier = {
			factor = 1.05
			NOT = { intrigue = 9 }
		}
		modifier = {
			factor = 0.95
			intrigue = 11
		}		
		modifier = {
			factor = 0.95
			intrigue = 12
		}	
		modifier = {
			factor = 0.95
			intrigue = 13
		}	
		modifier = {
			factor = 0.95
			intrigue = 14
		}	
		modifier = {
			factor = 0.95
			intrigue = 15
		}
		modifier = {
			factor = 0.95
			intrigue = 16
		}
		modifier = {
			factor = 0.95
			intrigue = 17
		}	
		modifier = {
			factor = 0.95
			intrigue = 18
		}
		modifier = {
			factor = 0.95
			intrigue = 19
		}
		modifier = {
			factor = 0.95
			intrigue = 20
		}
		modifier = {
			factor = 0.95
			intrigue = 21
		}
		modifier = {
			factor = 0.95
			intrigue = 22
		}
		modifier = {
			factor = 0.95
			intrigue = 23
		}
		modifier = {
			factor = 0.95
			intrigue = 24
		}
		modifier = {
			factor = 0.95
			intrigue = 25
		}
	}
	
	option = {
		name = "EVTOPTA936"
		hidden_tooltip = {
			location = {
				random_province_lord = {
					limit = {
						NOT = { is_liege_of = ROOT }
						NOT = { character = ROOT }
						ROOT = {
							liege = {
								NOT = { opinion = { who = PREVPREV value = 0 } }
								same_realm = PREVPREV
							}
						}
					}
					set_character_flag = corrupt_nobel
				}
			}
			liege = { letter_event = { id = 20370 days = 1 } }
		}
	}
}

#20370 - Liege is informed
letter_event = {
	id = 20370
	desc = "EVTDESC20370"
	
	is_triggered_only = yes
	
	option = {
		name = "EVTOPTA20370"
		ai_chance = { factor = 100 }
		hidden_tooltip = {
			FROM = {
				character_event = { id = 20371 days = 1 }
			}
		}
	}
	option = {
		name = "EVTOPTB20370"
		ai_chance = { factor = 0 }
		hidden_tooltip = {
			FROM = {
				character_event = { id = 20372 days = 1 }
			}
		}
	}
}

#20371 - Accuse him
character_event = {
	id = 20371
	desc = "EVTDESC20371"
	picture = GFX_evt_spymaster
	
	is_triggered_only = yes
	
	option = {
		name = "EVTOPTA20371"
		hidden_tooltip = {
			location = {
				random_province_lord = {
					limit = {
						NOT = { is_liege_of = ROOT }
						NOT = { character = ROOT }
						ROOT = {
							liege = {
								NOT = { opinion = { who = PREVPREV value = 0 } }
								same_realm = PREVPREV
							}
						}
					}
					set_character_flag = corrupt_nobel_accused
					character_event = { id = 20373 days = 1 }
				}
			}
		}
	}
}

#20372 - Do nothing
character_event = {
	id = 20372
	desc = "EVTDESC20372"
	picture = GFX_evt_spymaster
	
	is_triggered_only = yes
	
	option = {
		name = "EVTOPTA20372"
		hidden_tooltip = {
			location = {
				random_province_lord = {
					limit = {
						NOT = { is_liege_of = ROOT }
						NOT = { character = ROOT }
						ROOT = {
							liege = {
								NOT = { opinion = { who = PREVPREV value = 0 } }
								same_realm = PREVPREV
							}
						}
					}
					clr_character_flag = corrupt_nobel
				}
			}
		}
	}
}

#20373 - The noble responds to accusation
character_event = {
	id = 20373
	desc = "EVTDESC20373"
	picture = GFX_evt_spymaster

	hide_from = yes
	
	is_triggered_only = yes
	
	option = {
		name = "EVTOPTA20373"
		random_list = {
			50 = {
				FROM = {
					set_character_flag = spymaster_attacked
					character_event = { id = 20376 days = 1 tooltip = "EVTTOOLTIPSPYMASTERATTACK" }
				}
				hidden_tooltip = {
					character_event = { id = 20374 days = 1 }
				}
			}
			50 = {
				FROM = {
					set_character_flag = spymaster_killed
					character_event = { id = 20376 days = 1 tooltip = "EVTTOOLTIPSPYMASTERKILLED" }
				}
				hidden_tooltip = {
					character_event = { id = 20375 days = 1 }
				}
			}
		}
	}
	option = {
		name = "EVTOPTB20373"
		prestige = -25
		scaled_wealth = -0.25
		clr_character_flag = corrupt_nobel
		hidden_tooltip = {
			FROM = {
				letter_event = { id = 20379 days = 1 }
			}
		}
	}
}

#20374 - Spymaster gets away
character_event = {
	id = 20374
	desc = "EVTDESC20374"
	picture = GFX_evt_spymaster
	
	is_triggered_only = yes
	
	option = {
		name = "EVTOPTA20364"
		prestige = -10
	}
}

#20375 - Spymaster is killed
character_event = {
	id = 20375
	desc = "EVTDESC20375"
	picture = GFX_evt_death
	
	is_triggered_only = yes
	
	option = {
		name = "EXCELLENT"
	}
}

#20376 - Spymaster is attacked
character_event = {
	id = 20376
	desc = "EVTDESC20376"
	picture = GFX_evt_melee

	hide_from = yes
	
	is_triggered_only = yes

	option = {
		name = "EVTOPTA20376"
		trigger = { has_character_flag = spymaster_attacked }
		hidden_tooltip = {
			liege = { letter_event = { id = 20377 days = 1 } }
		}
		clr_character_flag = spymaster_attacked
	}
	option = {
		name = "EVTOPTB20376"
		trigger = { has_character_flag = spymaster_killed }
		hidden_tooltip = {
			liege = { character_event = { id = 20378 days = 1 } }
		}
		clr_character_flag = spymaster_killed
		death = { death_reason = death_murder_unknown }
	}
}

#20377 - Inform the Liege about attack
letter_event = {
	id = 20377
	desc = "EVTDESC20377"
	
	is_triggered_only = yes
	
	option = {
		name = "EVTOPTA20377"
		hidden_tooltip = {
			FROM = {
				FROM = {
					character_event = { id = 20363 days = 1 }
				}
			}
		}
	}
}

#20378 - Inform the Liege about death
character_event = {
	id = 20378
	desc = "EVTDESC20378"
	picture = GFX_evt_death

	hide_from = yes
	
	is_triggered_only = yes
	
	option = {
		name = "EVTOPTA20378"
		prestige = -15
		hidden_tooltip = {
			FROM = {
				FROM = {
					clr_character_flag = corrupt_nobel
				}
			}
		}
	}
}

#20379 - Noble confess to spymaster
letter_event = {
	id = 20379
	desc = "EVTDESC20379"
	
	is_triggered_only = yes
	
	option = {
		name = "EVTOPTA20379"
		hidden_tooltip = {
			liege = { letter_event = { id = 20369 days = 1 } }
		}
	}
}

#20369 - Spymaster report to liege about confession
letter_event = {
	id = 20369
	desc = "EVTDESC20369"
	
	is_triggered_only = yes
	
	option = {
		name = "EXCELLENT"
		wealth = 50
	}
}
