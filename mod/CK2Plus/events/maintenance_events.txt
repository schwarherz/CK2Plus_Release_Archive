character_event = {
	id = 110000
	picture = "GFX_evt_council"	
	
	hide_from = yes
	
	trigger = {
		ai = no 
		trait = not_dejure_liege
	}
		
	desc = "EVTDESC110000"
	
	mean_time_to_happen = {
		days = 1
	}
	
	option = {
		name = "EVTOPTA110000"
		remove_trait = not_dejure_liege
	}
}

character_event = {
	id = 110001
	picture = "GFX_evt_council"	
	
	is_triggered_only = yes
	only_rulers = yes
	
	trigger = {
		primary_title = { tier = EMPEROR }
		any_demesne_title = {
			tier = KING
			empire = { holder_scope = { character = ROOT } }
			OR = {
				AND = {
					empire = { has_law = investiture_law_0 }
					NOT = { has_law = investiture_law_0 }
				}
				AND = {
					empire = { has_law = investiture_law_1 }
					NOT = { has_law = investiture_law_1 }
				}
				AND = {
					empire = { has_law = revoke_law_0 }
					NOT = { has_law = revoke_law_0 }
				}
				AND = {
					empire = { has_law = revoke_law_1 }
					NOT = { has_law = revoke_law_1 }
				}			
				AND = {
					empire = { has_law = centralization_0 }
					NOT = { has_law = centralization_0 }
				}
				AND = {
					empire = { has_law = centralization_1 }
					NOT = { has_law = centralization_1 }
				}	
				AND = {
					empire = { has_law = centralization_2 }
					NOT = { has_law = centralization_2 }
				}
				AND = {
					empire = { has_law = centralization_3 }
					NOT = { has_law = centralization_3 }
				}	
				AND = {
					empire = { has_law = centralization_4 }
					NOT = { has_law = centralization_4 }
				}				
			}
		}
	}
		
	desc = "EVTDESC110001"
	
	mean_time_to_happen = {
		days = 1
	}
	
	option = {
		name = "EVTOPTA110001"	
		set_character_flag = centralize_without_penalties
		any_demesne_title = {
			limit = {
				tier = KING
				empire = { holder_scope = { character = ROOT } }
				OR = {
					AND = {
						empire = { has_law = investiture_law_0 }
						NOT = { has_law = investiture_law_0 }
					}
					AND = {
						empire = { has_law = investiture_law_1 }
						NOT = { has_law = investiture_law_1 }
					}
					AND = {
						empire = { has_law = revoke_law_0 }
						NOT = { has_law = revoke_law_0 }
					}
					AND = {
						empire = { has_law = revoke_law_1 }
						NOT = { has_law = revoke_law_1 }
					}				
					AND = {
						empire = { has_law = centralization_0 }
						NOT = { has_law = centralization_0 }
					}
					AND = {
						empire = { has_law = centralization_1 }
						NOT = { has_law = centralization_1 }
					}	
					AND = {
						empire = { has_law = centralization_2 }
						NOT = { has_law = centralization_2 }
					}
					AND = {
						empire = { has_law = centralization_3 }
						NOT = { has_law = centralization_3 }
					}	
					AND = {
						empire = { has_law = centralization_4 }
						NOT = { has_law = centralization_4 }
					}					
				}			
			}
			if = {
				limit = {
					empire = { has_law = centralization_0 }
				}
				add_law_w_cooldown = centralization_0
			}
			if = {
				limit = {
					empire = { has_law = centralization_1 }
				}
				add_law_w_cooldown = centralization_1
			}
			if = {
				limit = {
					empire = { has_law = centralization_2 }
				}
				add_law_w_cooldown = centralization_2
			}
			if = {
				limit = {
					empire = { has_law = centralization_3 }
				}
				add_law_w_cooldown = centralization_3
			}
			if = {
				limit = {
					empire = { has_law = centralization_4 }
				}
				add_law_w_cooldown = centralization_4
			}
			if = {
				limit = {
					empire = { has_law = investiture_law_0 }
				}
				add_law_w_cooldown = investiture_law_0
			}
			if = {
				limit = {
					empire = { has_law = investiture_law_1 }
				}
				add_law_w_cooldown = investiture_law_1
			}
			if = {
				limit = {
					empire = { has_law = revoke_law_0 }
				}
				add_law_w_cooldown = revoke_law_0
			}
			if = {
				limit = {
					empire = { has_law = revoke_law_1 }
				}
				add_law_w_cooldown = revoke_law_1
			}			
		}
		clr_character_flag = centralize_without_penalties
	}
}

character_event = {
	id = 110017
	
	trigger = {
		ai = yes
		primary_title = { higher_tier_than = DUKE }
		OR = {
			num_of_duke_titles = 3	
			AND = {
				primary_title = { has_law = succ_feudal_elective }
				num_of_duke_titles = 2
			}
		}
		OR = {	
			any_realm_lord = {
				religion = ROOT
				is_liege_or_above = ROOT			
				any_demesne_title = {
					tier = COUNT					
					location = {
						duchy = {
							holder_scope = { character = ROOT }
							NOT = {
								ROOT = {
									capital_scope = {
										duchy = { title = PREVPREVPREV }
									}									
								}
							}
						}	
					}
				}				
			}
			any_demesne_title = {
				tier = COUNT
				location = {
					duchy = {
						holder_scope = { character = ROOT }
						NOT = {
							ROOT = {
								capital_scope = {
									duchy = { title = PREVPREVPREV }
								}									
							}
						}
					}
				}
			}			
		}
	}
		
	desc = "EVTDESC110017"
	
	mean_time_to_happen = {
		days = 1
	}
	
	option = {
		name = "EVTOPTA110017"
		hidden_tooltip = {
			#try to give it to a count with their capital in the duchy
			#give it to lords with good relationship + same culture
			random_realm_lord = {
				limit = {
					NOT = { has_global_flag = duchy_granted }
					religion = ROOT
					culture = ROOT
					is_liege_or_above = ROOT
					reverse_opinion = { who = ROOT value = 50 }
					opinion = { who = ROOT value = 0 }
					primary_title = {
						tier = COUNT
					}
					capital_scope = {
						duchy = {
							holder_scope = { character = ROOT }
							NOT = {
								ROOT = {
									capital_scope = {
										duchy = { title = PREVPREVPREV }
									}									
								}
							}
						}				
					}
				}
				capital_scope = {
					duchy = {
						gain_title = PREVPREV
					}
				}
				set_global_flag = duchy_granted
			}
			random_realm_lord = {
				limit = {
					NOT = { has_global_flag = duchy_granted }
					religion = ROOT
					culture = ROOT
					is_liege_or_above = ROOT
					reverse_opinion = { who = ROOT value = 25 }
					opinion = { who = ROOT value = -25 }
					primary_title = {
						tier = COUNT
					}
					capital_scope = {
						duchy = {
							holder_scope = { character = ROOT }
							NOT = {
								ROOT = {
									capital_scope = {
										duchy = { title = PREVPREVPREV }
									}									
								}
							}
						}				
					}
				}
				capital_scope = {
					duchy = {
						gain_title = PREVPREV
					}
				}
				set_global_flag = duchy_granted
			}
			random_realm_lord = {
				limit = {
					NOT = { has_global_flag = duchy_granted }
					religion = ROOT
					culture = ROOT
					is_liege_or_above = ROOT
					reverse_opinion = { who = ROOT value = 0 }
					opinion = { who = ROOT value = -50 }
					primary_title = {
						tier = COUNT
					}
					capital_scope = {
						duchy = {
							holder_scope = { character = ROOT }
							NOT = {
								ROOT = {
									capital_scope = {
										duchy = { title = PREVPREVPREV }
									}									
								}
							}
						}				
					}
				}
				capital_scope = {
					duchy = {
						gain_title = PREVPREV
					}
				}
				set_global_flag = duchy_granted
			}
			#give it to lords with good relationship + same culture group
			random_realm_lord = {
				limit = {
					NOT = { has_global_flag = duchy_granted }
					religion = ROOT
					culture_group = ROOT
					is_liege_or_above = ROOT
					reverse_opinion = { who = ROOT value = 50 }
					opinion = { who = ROOT value = 0 }
					primary_title = {
						tier = COUNT
					}
					capital_scope = {
						duchy = {
							holder_scope = { character = ROOT }
							NOT = {
								ROOT = {
									capital_scope = {
										duchy = { title = PREVPREVPREV }
									}									
								}
							}
						}				
					}
				}
				capital_scope = {
					duchy = {
						gain_title = PREVPREV
					}
				}
				set_global_flag = duchy_granted
			}
			random_realm_lord = {
				limit = {
					NOT = { has_global_flag = duchy_granted }
					religion = ROOT
					culture_group = ROOT
					is_liege_or_above = ROOT
					reverse_opinion = { who = ROOT value = 25 }
					opinion = { who = ROOT value = -25 }
					primary_title = {
						tier = COUNT
					}
					capital_scope = {
						duchy = {
							holder_scope = { character = ROOT }
							NOT = {
								ROOT = {
									capital_scope = {
										duchy = { title = PREVPREVPREV }
									}									
								}
							}
						}				
					}
				}
				capital_scope = {
					duchy = {
						gain_title = PREVPREV
					}
				}
				set_global_flag = duchy_granted
			}
			random_realm_lord = {
				limit = {
					NOT = { has_global_flag = duchy_granted }
					religion = ROOT
					culture_group = ROOT
					is_liege_or_above = ROOT
					reverse_opinion = { who = ROOT value = 0 }
					opinion = { who = ROOT value = -50 }
					primary_title = {
						tier = COUNT
					}
					capital_scope = {
						duchy = {
							holder_scope = { character = ROOT }
							NOT = {
								ROOT = {
									capital_scope = {
										duchy = { title = PREVPREVPREV }
									}									
								}
							}
						}				
					}
				}
				capital_scope = {
					duchy = {
						gain_title = PREVPREV
					}
				}
				set_global_flag = duchy_granted
			}			
			#give to lords with which we have a decent relationship
			random_realm_lord = {
				limit = {
					NOT = { has_global_flag = duchy_granted }
					religion = ROOT
					is_liege_or_above = ROOT
					reverse_opinion = { who = ROOT value = 50 }
					opinion = { who = ROOT value = 0 }
					primary_title = {
						tier = COUNT
					}
					capital_scope = {
						duchy = {
							holder_scope = { character = ROOT }
							NOT = {
								ROOT = {
									capital_scope = {
										duchy = { title = PREVPREVPREV }
									}									
								}
							}
						}				
					}
				}
				capital_scope = {
					duchy = {
						gain_title = PREVPREV
					}
				}
				set_global_flag = duchy_granted
			}
			random_realm_lord = {
				limit = {
					NOT = { has_global_flag = duchy_granted }
					religion = ROOT
					is_liege_or_above = ROOT
					reverse_opinion = { who = ROOT value = 25 }
					opinion = { who = ROOT value = -25 }
					primary_title = {
						tier = COUNT
					}
					capital_scope = {
						duchy = {
							holder_scope = { character = ROOT }
							NOT = {
								ROOT = {
									capital_scope = {
										duchy = { title = PREVPREVPREV }
									}									
								}
							}
						}				
					}
				}
				capital_scope = {
					duchy = {
						gain_title = PREVPREV
					}
				}
				set_global_flag = duchy_granted
			}
			random_realm_lord = {
				limit = {
					NOT = { has_global_flag = duchy_granted }
					religion = ROOT
					is_liege_or_above = ROOT
					reverse_opinion = { who = ROOT value = 0 }
					opinion = { who = ROOT value = -50 }
					primary_title = {
						tier = COUNT
					}
					capital_scope = {
						duchy = {
							holder_scope = { character = ROOT }
							NOT = {
								ROOT = {
									capital_scope = {
										duchy = { title = PREVPREVPREV }
									}									
								}
							}
						}				
					}
				}
				capital_scope = {
					duchy = {
						gain_title = PREVPREV
					}
				}
				set_global_flag = duchy_granted
			}
			#try to give it to a count who has a province in the duchy
			#same culture
			random_realm_lord = {
				limit = {
					NOT = { has_global_flag = duchy_granted }
					religion = ROOT
					culture = ROOT
					is_liege_or_above = ROOT
					reverse_opinion = { who = ROOT value = 50 }
					opinion = { who = ROOT value = 0 }
					primary_title = {
						tier = COUNT
					}
					any_demesne_title = {
						tier = COUNT
						location = {
							duchy = {
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										capital_scope = {
											duchy = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
				}
				random_demesne_title = {
					limit = {
						tier = COUNT
						location = {
							duchy = {
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										capital_scope = {
											duchy = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
					location = {
						duchy = {
							gain_title = PREVPREVPREV
						}
					}
				}
				set_global_flag = duchy_granted
			}
			random_realm_lord = {
				limit = {
					NOT = { has_global_flag = duchy_granted }
					religion = ROOT
					culture = ROOT
					is_liege_or_above = ROOT
					reverse_opinion = { who = ROOT value = 25 }
					opinion = { who = ROOT value = -25 }
					primary_title = {
						tier = COUNT
					}
					any_demesne_title = {
						tier = COUNT
						location = {
							duchy = {
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										capital_scope = {
											duchy = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
				}
				random_demesne_title = {
					limit = {
						tier = COUNT
						location = {
							duchy = {
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										capital_scope = {
											duchy = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
					location = {
						duchy = {
							gain_title = PREVPREVPREV
						}
					}
				}
				set_global_flag = duchy_granted
			}
			random_realm_lord = {
				limit = {
					NOT = { has_global_flag = duchy_granted }
					religion = ROOT
					culture = ROOT
					is_liege_or_above = ROOT
					reverse_opinion = { who = ROOT value = 0 }
					opinion = { who = ROOT value = -50 }
					primary_title = {
						tier = COUNT
					}
					any_demesne_title = {
						tier = COUNT
						location = {
							duchy = {
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										capital_scope = {
											duchy = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
				}
				random_demesne_title = {
					limit = {
						tier = COUNT
						location = {
							duchy = {
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										capital_scope = {
											duchy = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
					location = {
						duchy = {
							gain_title = PREVPREVPREV
						}
					}
				}
				set_global_flag = duchy_granted
			}
			#same culture group
			random_realm_lord = {
				limit = {
					NOT = { has_global_flag = duchy_granted }
					religion = ROOT
					culture_group = ROOT
					is_liege_or_above = ROOT
					reverse_opinion = { who = ROOT value = 50 }
					opinion = { who = ROOT value = 0 }
					primary_title = {
						tier = COUNT
					}
					any_demesne_title = {
						tier = COUNT
						location = {
							duchy = {
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										capital_scope = {
											duchy = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
				}
				random_demesne_title = {
					limit = {
						tier = COUNT
						location = {
							duchy = {
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										capital_scope = {
											duchy = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
					location = {
						duchy = {
							gain_title = PREVPREVPREV
						}
					}
				}
				set_global_flag = duchy_granted
			}
			random_realm_lord = {
				limit = {
					NOT = { has_global_flag = duchy_granted }
					religion = ROOT
					culture_group = ROOT
					is_liege_or_above = ROOT
					reverse_opinion = { who = ROOT value = 25 }
					opinion = { who = ROOT value = -25 }
					primary_title = {
						tier = COUNT
					}
					any_demesne_title = {
						tier = COUNT
						location = {
							duchy = {
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										capital_scope = {
											duchy = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
				}
				random_demesne_title = {
					limit = {
						tier = COUNT
						location = {
							duchy = {
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										capital_scope = {
											duchy = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
					location = {
						duchy = {
							gain_title = PREVPREVPREV
						}
					}
				}
				set_global_flag = duchy_granted
			}
			random_realm_lord = {
				limit = {
					NOT = { has_global_flag = duchy_granted }
					religion = ROOT
					culture_group = ROOT
					is_liege_or_above = ROOT
					reverse_opinion = { who = ROOT value = 0 }
					opinion = { who = ROOT value = -50 }
					primary_title = {
						tier = COUNT
					}
					any_demesne_title = {
						tier = COUNT
						location = {
							duchy = {
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										capital_scope = {
											duchy = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
				}
				random_demesne_title = {
					limit = {
						tier = COUNT
						location = {
							duchy = {
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										capital_scope = {
											duchy = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
					location = {
						duchy = {
							gain_title = PREVPREVPREV
						}
					}
				}
				set_global_flag = duchy_granted
			}			
			#by relation
			random_realm_lord = {
				limit = {
					NOT = { has_global_flag = duchy_granted }
					religion = ROOT
					is_liege_or_above = ROOT
					reverse_opinion = { who = ROOT value = 50 }
					opinion = { who = ROOT value = 0 }
					primary_title = {
						tier = COUNT
					}
					any_demesne_title = {
						tier = COUNT
						location = {
							duchy = {
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										capital_scope = {
											duchy = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
				}
				random_demesne_title = {
					limit = {
						tier = COUNT
						location = {
							duchy = {
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										capital_scope = {
											duchy = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
					location = {
						duchy = {
							gain_title = PREVPREVPREV
						}
					}
				}
				set_global_flag = duchy_granted
			}
			random_realm_lord = {
				limit = {
					NOT = { has_global_flag = duchy_granted }
					religion = ROOT
					is_liege_or_above = ROOT
					reverse_opinion = { who = ROOT value = 25 }
					opinion = { who = ROOT value = -25 }
					primary_title = {
						tier = COUNT
					}
					any_demesne_title = {
						tier = COUNT
						location = {
							duchy = {
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										capital_scope = {
											duchy = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
				}
				random_demesne_title = {
					limit = {
						tier = COUNT
						location = {
							duchy = {
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										capital_scope = {
											duchy = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
					location = {
						duchy = {
							gain_title = PREVPREVPREV
						}
					}
				}
				set_global_flag = duchy_granted
			}
			random_realm_lord = {
				limit = {
					NOT = { has_global_flag = duchy_granted }
					religion = ROOT
					is_liege_or_above = ROOT
					reverse_opinion = { who = ROOT value = 0 }
					opinion = { who = ROOT value = -50 }
					primary_title = {
						tier = COUNT
					}
					any_demesne_title = {
						tier = COUNT
						location = {
							duchy = {
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										capital_scope = {
											duchy = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
				}
				random_demesne_title = {
					limit = {
						tier = COUNT
						location = {
							duchy = {
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										capital_scope = {
											duchy = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
					location = {
						duchy = {
							gain_title = PREVPREVPREV
						}
					}
				}
				set_global_flag = duchy_granted
			}			
			#if we have a large demesne, try to give it to a randomly generated character along with a count title in the duchy that we hold
			random_demesne_title = {
				limit = {
					tier = COUNT
					ROOT = { NOT = { demesne_efficiency = 1.5 } }
					NOT = { has_global_flag = duchy_granted }
					location = {
						duchy = {
							holder_scope = { character = ROOT }
							NOT = {
								ROOT = {
									capital_scope = {
										duchy = { title = PREVPREVPREV }
									}									
								}
							}
						}	
					}
				}	
				ROOT = {
					create_random_steward = {
						random_traits = yes
						dynasty = random
						female = no
					}
					new_character = {					
						ROOT = {
							random_demesne_title = {
								limit = {
									tier = COUNT
									location = {
										duchy = {
											holder_scope = { character = ROOT }
											NOT = {
												ROOT = {
													capital_scope = {
														duchy = { title = PREVPREVPREV }
													}									
												}
											}
										}
									}
								}
								location = {
									set_province_flag = this_duchy
								}
							}
							random_demesne_province = {
								limit = {
									has_province_flag = this_duchy
								}
								county = {
									gain_title = PREVPREVPREV
								}
								duchy = {
									gain_title = PREVPREVPREV
								}
								clr_province_flag = this_duchy
							}
						}
					}
				}
				set_global_flag = duchy_granted
			}
			#give it to anyone with their capital in the duchy
			random_realm_lord = {
				limit = {
					NOT = { has_global_flag = duchy_granted }
					religion = ROOT
					culture = ROOT
					is_liege_or_above = ROOT
					primary_title = {
						tier = COUNT
					}
					capital_scope = {
						duchy = {
							holder_scope = { character = ROOT }
							NOT = {
								ROOT = {
									capital_scope = {
										duchy = { title = PREVPREVPREV }
									}									
								}
							}
						}				
					}
				}
				capital_scope = {
					duchy = {
						gain_title = PREVPREV
					}
				}
				set_global_flag = duchy_granted
			}			
			random_realm_lord = {
				limit = {
					NOT = { has_global_flag = duchy_granted }
					religion = ROOT
					culture_group = ROOT
					is_liege_or_above = ROOT
					primary_title = {
						tier = COUNT
					}
					capital_scope = {
						duchy = {
							holder_scope = { character = ROOT }
							NOT = {
								ROOT = {
									capital_scope = {
										duchy = { title = PREVPREVPREV }
									}									
								}
							}
						}				
					}
				}
				capital_scope = {
					duchy = {
						gain_title = PREVPREV
					}
				}
				set_global_flag = duchy_granted
			}			
			random_realm_lord = {
				limit = {
					NOT = { has_global_flag = duchy_granted }
					religion = ROOT
					is_liege_or_above = ROOT
					primary_title = {
						tier = COUNT
					}
					capital_scope = {
						duchy = {
							holder_scope = { character = ROOT }
							NOT = {
								ROOT = {
									capital_scope = {
										duchy = { title = PREVPREVPREV }
									}									
								}
							}
						}				
					}
				}
				capital_scope = {
					duchy = {
						gain_title = PREVPREV
					}
				}
				set_global_flag = duchy_granted
			}
			#anyone with a province in the duchy
			random_realm_lord = {
				limit = {
					NOT = { has_global_flag = duchy_granted }
					religion = ROOT
					culture = ROOT
					is_liege_or_above = ROOT
					primary_title = {
						tier = COUNT
					}
					any_demesne_title = {
						tier = COUNT
						location = {
							duchy = {
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										capital_scope = {
											duchy = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
				}
				random_demesne_title = {
					limit = {
						tier = COUNT
						location = {
							duchy = {
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										capital_scope = {
											duchy = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
					location = {
						duchy = {
							gain_title = PREVPREVPREV
						}
					}
				}
				set_global_flag = duchy_granted
			}			
			random_realm_lord = {
				limit = {
					NOT = { has_global_flag = duchy_granted }
					religion = ROOT
					culture_group = ROOT
					is_liege_or_above = ROOT
					primary_title = {
						tier = COUNT
					}
					any_demesne_title = {
						tier = COUNT
						location = {
							duchy = {
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										capital_scope = {
											duchy = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
				}
				random_demesne_title = {
					limit = {
						tier = COUNT
						location = {
							duchy = {
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										capital_scope = {
											duchy = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
					location = {
						duchy = {
							gain_title = PREVPREVPREV
						}
					}
				}
				set_global_flag = duchy_granted
			}			
			random_realm_lord = {
				limit = {
					NOT = { has_global_flag = duchy_granted }
					religion = ROOT
					is_liege_or_above = ROOT
					primary_title = {
						tier = COUNT
					}
					any_demesne_title = {
						tier = COUNT
						location = {
							duchy = {
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										capital_scope = {
											duchy = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
				}
				random_demesne_title = {
					limit = {
						tier = COUNT
						location = {
							duchy = {
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										capital_scope = {
											duchy = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
					location = {
						duchy = {
							gain_title = PREVPREVPREV
						}
					}
				}
				set_global_flag = duchy_granted
			}			
			#if we have at least half our demesne size in provinces, try to give it to a randomly generated character along with a count title in the duchy that we hold
			random_demesne_title = {
				limit = {
					tier = COUNT
					ROOT = { NOT = { demesne_efficiency = 2.0 } }
					NOT = { has_global_flag = duchy_granted }
					location = {
						duchy = {
							holder_scope = { character = ROOT }
							NOT = {
								ROOT = {
									capital_scope = {
										duchy = { title = PREVPREVPREV }
									}									
								}
							}
						}	
					}
				}	
				ROOT = {
					create_random_steward = {
						random_traits = yes
						dynasty = random
						female = no
					}
					new_character = {					
						ROOT = {
							random_demesne_title = {
								limit = {
									tier = COUNT
									location = {
										duchy = {
											holder_scope = { character = ROOT }
											NOT = {
												ROOT = {
													capital_scope = {
														duchy = { title = PREVPREVPREV }
													}									
												}
											}
										}
									}
								}
								location = {
									set_province_flag = this_duchy
								}
							}
							random_demesne_province = {
								limit = {
									has_province_flag = this_duchy
								}
								county = {
									gain_title = PREVPREVPREV
								}
								duchy = {
									gain_title = PREVPREVPREV
								}
								clr_province_flag = this_duchy
							}
						}
					}
				}
				set_global_flag = duchy_granted
			}						
			#if all else fails, give it to any vassal that has land in the duchy
			#same culture
			random_realm_lord = {
				limit = {
					NOT = { has_global_flag = duchy_granted }
					religion = ROOT
					culture = ROOT
					is_liege_or_above = ROOT
					reverse_opinion = { who = ROOT value = 50 }
					opinion = { who = ROOT value = 0 }
					any_demesne_title = {
						tier = COUNT
						location = {
							duchy = {
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										capital_scope = {
											duchy = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
				}
				random_demesne_title = {
					limit = {
						tier = COUNT
						location = {
							duchy = {
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										capital_scope = {
											duchy = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
					location = {
						duchy = {
							gain_title = PREVPREVPREV
						}
					}
				}
				set_global_flag = duchy_granted
			}	
			random_realm_lord = {
				limit = {
					NOT = { has_global_flag = duchy_granted }
					religion = ROOT
					culture = ROOT
					is_liege_or_above = ROOT
					reverse_opinion = { who = ROOT value = 25 }
					opinion = { who = ROOT value = -25 }
					any_demesne_title = {
						tier = COUNT
						location = {
							duchy = {
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										capital_scope = {
											duchy = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
				}
				random_demesne_title = {
					limit = {
						tier = COUNT
						location = {
							duchy = {
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										capital_scope = {
											duchy = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
					location = {
						duchy = {
							gain_title = PREVPREVPREV
						}
					}
				}
				set_global_flag = duchy_granted
			}
			random_realm_lord = {
				limit = {
					NOT = { has_global_flag = duchy_granted }
					religion = ROOT
					culture = ROOT
					is_liege_or_above = ROOT
					reverse_opinion = { who = ROOT value = 0 }
					opinion = { who = ROOT value = -50 }
					any_demesne_title = {
						tier = COUNT
						location = {
							duchy = {
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										capital_scope = {
											duchy = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
				}
				random_demesne_title = {
					limit = {
						tier = COUNT
						location = {
							duchy = {
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										capital_scope = {
											duchy = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
					location = {
						duchy = {
							gain_title = PREVPREVPREV
						}
					}
				}
				set_global_flag = duchy_granted
			}
			#culture group
			random_realm_lord = {
				limit = {
					NOT = { has_global_flag = duchy_granted }
					religion = ROOT
					culture_group = ROOT
					is_liege_or_above = ROOT
					reverse_opinion = { who = ROOT value = 50 }
					opinion = { who = ROOT value = 0 }
					any_demesne_title = {
						tier = COUNT
						location = {
							duchy = {
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										capital_scope = {
											duchy = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
				}
				random_demesne_title = {
					limit = {
						tier = COUNT
						location = {
							duchy = {
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										capital_scope = {
											duchy = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
					location = {
						duchy = {
							gain_title = PREVPREVPREV
						}
					}
				}
				set_global_flag = duchy_granted
			}	
			random_realm_lord = {
				limit = {
					NOT = { has_global_flag = duchy_granted }
					religion = ROOT
					culture_group = ROOT
					is_liege_or_above = ROOT
					reverse_opinion = { who = ROOT value = 25 }
					opinion = { who = ROOT value = -25 }
					any_demesne_title = {
						tier = COUNT
						location = {
							duchy = {
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										capital_scope = {
											duchy = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
				}
				random_demesne_title = {
					limit = {
						tier = COUNT
						location = {
							duchy = {
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										capital_scope = {
											duchy = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
					location = {
						duchy = {
							gain_title = PREVPREVPREV
						}
					}
				}
				set_global_flag = duchy_granted
			}
			random_realm_lord = {
				limit = {
					NOT = { has_global_flag = duchy_granted }
					religion = ROOT
					culture_group = ROOT
					is_liege_or_above = ROOT
					reverse_opinion = { who = ROOT value = 0 }
					opinion = { who = ROOT value = -50 }
					any_demesne_title = {
						tier = COUNT
						location = {
							duchy = {
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										capital_scope = {
											duchy = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
				}
				random_demesne_title = {
					limit = {
						tier = COUNT
						location = {
							duchy = {
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										capital_scope = {
											duchy = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
					location = {
						duchy = {
							gain_title = PREVPREVPREV
						}
					}
				}
				set_global_flag = duchy_granted
			}			
			#by relation
			random_realm_lord = {
				limit = {
					NOT = { has_global_flag = duchy_granted }
					religion = ROOT
					is_liege_or_above = ROOT
					reverse_opinion = { who = ROOT value = 50 }
					opinion = { who = ROOT value = 0 }
					any_demesne_title = {
						tier = COUNT
						location = {
							duchy = {
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										capital_scope = {
											duchy = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
				}
				random_demesne_title = {
					limit = {
						tier = COUNT
						location = {
							duchy = {
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										capital_scope = {
											duchy = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
					location = {
						duchy = {
							gain_title = PREVPREVPREV
						}
					}
				}
				set_global_flag = duchy_granted
			}	
			random_realm_lord = {
				limit = {
					NOT = { has_global_flag = duchy_granted }
					religion = ROOT
					is_liege_or_above = ROOT
					reverse_opinion = { who = ROOT value = 25 }
					opinion = { who = ROOT value = -25 }
					any_demesne_title = {
						tier = COUNT
						location = {
							duchy = {
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										capital_scope = {
											duchy = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
				}
				random_demesne_title = {
					limit = {
						tier = COUNT
						location = {
							duchy = {
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										capital_scope = {
											duchy = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
					location = {
						duchy = {
							gain_title = PREVPREVPREV
						}
					}
				}
				set_global_flag = duchy_granted
			}
			random_realm_lord = {
				limit = {
					NOT = { has_global_flag = duchy_granted }
					religion = ROOT
					is_liege_or_above = ROOT
					reverse_opinion = { who = ROOT value = 0 }
					opinion = { who = ROOT value = -50 }
					any_demesne_title = {
						tier = COUNT
						location = {
							duchy = {
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										capital_scope = {
											duchy = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
				}
				random_demesne_title = {
					limit = {
						tier = COUNT
						location = {
							duchy = {
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										capital_scope = {
											duchy = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
					location = {
						duchy = {
							gain_title = PREVPREVPREV
						}
					}
				}
				set_global_flag = duchy_granted
			}
			#anyone
			random_realm_lord = {
				limit = {
					NOT = { has_global_flag = duchy_granted }
					religion = ROOT
					is_liege_or_above = ROOT
					culture = ROOT
					any_demesne_title = {
						tier = COUNT
						location = {
							duchy = {
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										capital_scope = {
											duchy = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
				}
				random_demesne_title = {
					limit = {
						tier = COUNT
						location = {
							duchy = {
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										capital_scope = {
											duchy = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
					location = {
						duchy = {
							gain_title = PREVPREVPREV
						}
					}
				}
				set_global_flag = duchy_granted
			}			
			random_realm_lord = {
				limit = {
					NOT = { has_global_flag = duchy_granted }
					religion = ROOT
					is_liege_or_above = ROOT
					culture_group = ROOT
					any_demesne_title = {
						tier = COUNT
						location = {
							duchy = {
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										capital_scope = {
											duchy = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
				}
				random_demesne_title = {
					limit = {
						tier = COUNT
						location = {
							duchy = {
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										capital_scope = {
											duchy = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
					location = {
						duchy = {
							gain_title = PREVPREVPREV
						}
					}
				}
				set_global_flag = duchy_granted
			}			
			random_realm_lord = {
				limit = {
					NOT = { has_global_flag = duchy_granted }
					religion = ROOT
					is_liege_or_above = ROOT
					any_demesne_title = {
						tier = COUNT
						location = {
							duchy = {
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										capital_scope = {
											duchy = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
				}
				random_demesne_title = {
					limit = {
						tier = COUNT
						location = {
							duchy = {
								holder_scope = { character = ROOT }
								NOT = {
									ROOT = {
										capital_scope = {
											duchy = { title = PREVPREVPREV }
										}									
									}
								}
							}	
						}
					}
					location = {
						duchy = {
							gain_title = PREVPREVPREV
						}
					}
				}
				set_global_flag = duchy_granted
			}	
			#give it away to random character, regardless of demesne size
			random_demesne_title = {
				limit = {
					tier = COUNT
					NOT = { has_global_flag = duchy_granted }
					location = {
						duchy = {
							holder_scope = { character = ROOT }
							NOT = {
								ROOT = {
									capital_scope = {
										duchy = { title = PREVPREVPREV }
									}									
								}
							}
						}	
					}
				}	
				ROOT = {
					create_random_steward = {
						random_traits = yes
						dynasty = random
						female = no
					}
					new_character = {					
						ROOT = {
							random_demesne_title = {
								limit = {
									tier = COUNT
									location = {
										duchy = {
											holder_scope = { character = ROOT }
											NOT = {
												ROOT = {
													capital_scope = {
														duchy = { title = PREVPREVPREV }
													}									
												}
											}
										}
									}
								}
								location = {
									set_province_flag = this_duchy
								}
							}
							random_demesne_province = {
								limit = {
									has_province_flag = this_duchy
								}
								county = {
									gain_title = PREVPREVPREV
								}
								duchy = {
									gain_title = PREVPREVPREV
								}
								clr_province_flag = this_duchy
							}
						}
					}
				}
				set_global_flag = duchy_granted
			}			
			clr_global_flag = duchy_granted	
			character_event = { id = 110017 }
		}
	}
}

character_event = {
	id = 110018	
	is_triggered_only = yes
	hide_from = yes
	
	trigger = {
		ai = yes
		NOT = { has_character_flag = plot_check }
		OR = {
			is_ruler = yes
			liege = { ai = no }
		}			
		OR = {
			has_objective = plot_gain_vassal_title
			has_objective = plot_gain_title
			has_objective = plot_weaken_fellow_vassal
			has_objective = plot_institute_hereditary_titles
			has_objective = plot_kidnap_liege
			has_objective = plot_succ_seniority
			has_objective = plot_succ_primogeniture
			has_objective = plot_succ_gavelkind
			has_objective = plot_succ_feudal_elective
			has_objective = plot_kill_character
			has_objective = plot_kill_spouse
			has_objective = plot_lower_crown_authority
		}
	}
		
	desc = "AI_EVENT"
	
	mean_time_to_happen = {
		days = 1
	}
	
	option = {
		name = "OK"
		set_character_flag = plot_check
	}
}

character_event = {
	id = 110019
	is_triggered_only = yes
	hide_from = yes
	
	trigger = {
		ai = yes
		had_character_flag = {
			flag = plot_check
			days = 730
		}
		OR = {
			NOT = { num_of_plot_backers = 1 }
			had_character_flag = {
				flag = plot_check
				days = 1095
			}				
		}
		OR = {
			NOT = { num_of_plot_backers = 2 }
			had_character_flag = {
				flag = plot_check
				days = 1460
			}				
		}
	}
		
	desc = "AI_EVENT"
	
	mean_time_to_happen = {
		days = 1
	}
	
	option = {
		name = "OK"
		set_character_flag = abort_plot
	}
}

character_event = {
	id = 110020
	is_triggered_only = yes
	hide_from = yes
	
	trigger = {
		ai = yes
		NOT = { has_character_flag = obj_check }
		OR = {
			is_ruler = yes
			liege = { ai = no }
		}
		age = 16
		OR = {
			has_objective = obj_status_quo
			has_objective = obj_befriend_liege
			has_objective = obj_befriend_relhead
			has_objective = obj_become_chancellor
			has_objective = obj_become_marshal
			has_objective = obj_become_treasurer
			has_objective = obj_become_spymaster
			has_objective = obj_become_spiritual
			has_objective = obj_amass_wealth_1
			has_objective = obj_amass_wealth_2
			has_objective = obj_amass_wealth_3
			has_objective = obj_amass_wealth_4
			has_objective = obj_become_paragon_of_virtue
			has_objective = obj_become_exalted_1
			has_objective = obj_become_exalted_2
			has_objective = obj_become_exalted_3
			has_objective = obj_become_exalted_4
			has_objective = obj_get_married
			has_objective = obj_marry_ruler
			has_objective = obj_have_a_daughter
			has_objective = obj_have_a_son
			has_objective = obj_become_heir
			has_objective = obj_wants_landed_title
			has_objective = obj_five_children
			has_objective = obj_ten_children
			has_objective = obj_fifteen_children
			has_objective = obj_twenty_children
			has_objective = obj_increase_demesne_1
			has_objective = obj_increase_demesne_2
			has_objective = obj_increase_demesne_3
			has_objective = obj_increase_demesne_4
			has_objective = obj_increase_demesne_5
			has_objective = obj_increase_demesne_6
			has_objective = obj_increase_demesne_7
			has_objective = obj_increase_demesne_8				
			has_objective = obj_increase_demesne_9
			has_objective = obj_go_crusade
			has_objective = obj_go_jihad
			has_objective = obj_find_lover
			has_objective = obj_become_independent
			has_objective = obj_become_duke				
			has_objective = obj_become_king
			has_objective = obj_become_emperor
			has_objective = obj_adopt_a_lifestyle
			has_objective = obj_gain_honorary_title
			has_objective = obj_convert_a_province
			has_objective = obj_win_a_war
			#has_objective = obj_break_out_of_prison #EXCEPTION	
		}
	}
		
	desc = "AI_EVENT"
	
	mean_time_to_happen = {
		days = 1
	}
	
	option = {
		name = "OK"
		set_character_flag = obj_check
	}
}

character_event = {
	id = 110021
	is_triggered_only = yes
	hide_from = yes
	
	trigger = {
		ai = yes
		had_character_flag = {
			flag = obj_check
			days = 3650
		}
	}
		
	desc = "AI_EVENT"
	
	mean_time_to_happen = {
		days = 1
	}
	
	option = {
		name = "OK"
		set_character_flag = abort_obj
	}
}

character_event = {
	id = 110022
	is_triggered_only = yes
	hide_from = yes
	
	trigger = {
		ai = yes
		NOT = { trait = not_dejure_liege }
		is_ruler = yes
		independent = no
		primary_title = { is_titular = no }
		NOT = {
			liege = {
				any_demesne_title = {
					ROOT = {
						primary_title = {
							de_jure_liege_or_above = PREVPREV
						}
					}
				}
			}
		}
	}
		
	desc = "AI_EVENT"
	
	mean_time_to_happen = {
		days = 1
	}
	
	option = {
		name = "OK"
		add_trait = not_dejure_liege
	}
}

character_event = {
	id = 110023
	is_triggered_only = yes
	hide_from = yes
	
	trigger = {
		ai = yes
		trait = not_dejure_liege
		OR = {
			is_ruler = no
			independent = yes
			primary_title = { is_titular = yes }				
			liege = {
				any_demesne_title = {
					ROOT = {
						primary_title = {
							de_jure_liege_or_above = PREVPREV
						}
					}
				}
			}	
		}
	}
		
	desc = "AI_EVENT"
	
	mean_time_to_happen = {
		days = 1
	}
	
	option = {
		name = "OK"
		remove_trait = not_dejure_liege
	}
}